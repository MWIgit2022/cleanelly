
var ItemObj={};$(document).on("click",".item-stock .store_view",function(){scroll_block($(".tabs_section"))});$(document).ready(function(){$('<div class="product-item-detail-tabs-container-fixed"><div class="wrapper_inner"><ul class="product-item-detail-tabs-list nav nav-tabs">'+$("ul.nav.nav-tabs").html()+'<li class="last"></li></ul></div></div>').insertAfter($("#headerfixed"));$(".product-item-detail-tabs-list a").addClass("dark_link");$(".tab_slider_wrapp .tabs > li").first().addClass("cur");$(".tab_slider_wrapp .slider_navigation > li").first().addClass("cur");$(".tab_slider_wrapp .tabs_content > li").first().addClass("cur");$(".tab_slider_wrapp .tabs > li").on("click",function(){InitFlexSlider();$(".tab_slider_wrapp .tabs_content").height($(".tab_slider_wrapp .tabs_content > li.cur").data("unhover"));$(window).resize()});$(".items-services .item").sliceHeight();$(document).on({mouseover:function(b){b.stopImmediatePropagation();var a=$(this).closest(".tab").attr("data-hover")*1;$(this).closest(".tab").fadeTo(100,1);$(this).closest(".tab").stop().css({height:a});$(this).closest(".flex-viewport").stop().css({height:a})},mouseleave:function(a){a.stopImmediatePropagation();var b=$(this).closest(".tab").attr("data-unhover")*1;$(this).closest(".tab").stop().animate({height:b},100);$(this).closest(".flex-viewport").stop().css({height:b})}},".tabs_slider > li");$(".opener").click(function(){$(this).find(".opener_icon").toggleClass("opened");var a=$(this).parents("tr").toggleClass("nb").next(".offer_stores").find(".stores_block_wrap");a.slideToggle(200)});$('a[data-toggle="tab"]').on("shown.bs.tab",function(g){var f=$(g.target),k=f.parent();if(f.closest(".product-item-detail-tabs-list").length){var j=$(".tabs_section").offset(),d=$(".product-item-detail-tabs-container-fixed").actual("outerHeight"),b=$("#headerfixed").actual("outerHeight");$("html, body").animate({scrollTop:j.top-b-d},400)}$(".nav.nav-tabs li").each(function(){$(this).removeClass("active");if($(this).index()==k.index()){$(this).addClass("active")}});if(k.hasClass("product_reviews_tab")){$(".shadow.common").hide();$("#reviews_content").show()}else{$(".shadow.common").show();$("#reviews_content").hide();if($(this).attr("href")=="#descr"){var i=$(".galerys-block");if(i.length){var c=i.find(".big_slider").length;var h=c?i.find(".big_slider"):i.find(".small_slider");InitFlexSlider();var a=setInterval(function(){if(h.find(".slides .item").attr("style").indexOf("height")===-1){$(window).resize()}else{clearInterval(a)}},100)}}}});if($(".title-tab-heading").length){$(".title-tab-heading").on("click",function(){var b=$(this),a=b.offset();$("html, body").animate({scrollTop:a.top-100},400)})}$(document).on("click",".hint .icon",function(a){var b=$(this).parents(".hint");if(b.is(".active")){b.removeClass("active").find(".tooltip").slideUp(200)}else{b.addClass("active").find(".tooltip").slideDown(200);b.find(".tooltip_close").click(function(c){c.stopPropagation();b.removeClass("active").find(".tooltip").slideUp(100)})}});$("html, body").on("mousedown",function(b){if(typeof b.target.className=="string"&&b.target.className.indexOf("adm")<0){b.stopPropagation();var c=$(b.target).closest(".hint");if(!$(b.target).closest(".hint").length){$(".hint").removeClass("active").find(".tooltip").slideUp(100)}else{var a=c.offset().top+""+c.offset().left;$(".hint").each(function(){var d=$(this).offset().top+""+$(this).offset().left;if($(this).text()+d!=c.text()+a){$(this).removeClass("active").find(".tooltip").slideUp(100)}})}}});$(".share_wrapp").find("*").on("mousedown",function(a){a.stopPropagation()});BX.addCustomEvent("onSlideInit",function(c){try{ignoreResize.push(true);if(c){var a=c.slider;if(a){if(a.find(".catalog_item").length){setHeightBlockSlider()}if(a.hasClass("small_slider")){$(".detail .small-gallery-block .item").sliceHeight({lineheight:-3})}if(a.hasClass("big_slider")){$(".detail .big_slider .item").sliceHeight({lineheight:-3})}}}}catch(b){}finally{ignoreResize.pop()}});BX.addCustomEvent("onWindowResize",function(b){try{ignoreResize.push(true);InitFlexSlider()}catch(a){}finally{ignoreResize.pop()}})});$(".set_block").ready(function(){$(".set_block ").equalize({children:'.item:not(".r") .cost',reset:true});$(".set_block").equalize({children:".item .item-title",reset:true});$(".set_block").equalize({children:".item .item_info",reset:false})});(function(b){if(!b.JCCatalogOnlyElement){b.JCCatalogOnlyElement=function(c){if(typeof c==="object"){this.params=c;this.obProduct=null;this.set_quantity=1;this.currentPriceMode="";this.currentPrices=[];this.currentPriceSelected=0;this.currentQuantityRanges=[];this.currentQuantityRangeSelected=0;if(this.params.MESS){this.mess=this.params.MESS}this.init()}};b.JCCatalogOnlyElement.prototype={init:function(){var d=0,c=0,e=null;this.obProduct=BX(this.params.ID);if(!!this.obProduct){$(this.obProduct).find(".counter_wrapp .counter_block input").data("product","ob"+this.obProduct.id+"el");this.currentPriceMode=this.params.ITEM_PRICE_MODE;this.currentPrices=this.params.ITEM_PRICES;this.currentQuantityRanges=this.params.ITEM_QUANTITY_RANGES}},setPriceAction:function(){this.set_quantity=this.params.MIN_QUANTITY_BUY;if($(this.obProduct).find("input[name=quantity]").length){this.set_quantity=$(this.obProduct).find("input[name=quantity]").val()}this.checkPriceRange(this.set_quantity);$(this.obProduct).find(".not_matrix").hide();$(this.obProduct).find(".with_matrix .price_value_block").html(getCurrentPrice(this.currentPrices[this.currentPriceSelected].PRICE,this.currentPrices[this.currentPriceSelected].CURRENCY,this.currentPrices[this.currentPriceSelected].PRINT_PRICE));if($(this.obProduct).find(".with_matrix .discount")){$(this.obProduct).find(".with_matrix .discount").html(getCurrentPrice(this.currentPrices[this.currentPriceSelected].BASE_PRICE,this.currentPrices[this.currentPriceSelected].CURRENCY,this.currentPrices[this.currentPriceSelected].PRINT_BASE_PRICE))}$(this.obProduct).find(".with_matrix .sale_block .text .values_wrapper").html(getCurrentPrice(this.currentPrices[this.currentPriceSelected].DISCOUNT,this.currentPrices[this.currentPriceSelected].CURRENCY,this.currentPrices[this.currentPriceSelected].PRINT_DISCOUNT));$(this.obProduct).find(".with_matrix").show();if(arNextOptions.THEME["SHOW_TOTAL_SUMM"]=="Y"){if(typeof this.currentPrices[this.currentPriceSelected]!=="undefined"){setPriceItem($(this.obProduct),this.set_quantity,this.currentPrices[this.currentPriceSelected].PRICE)}}},checkPriceRange:function(g){if(typeof g==="undefined"||this.currentPriceMode!="Q"){return}var d,f=false;for(var e in this.currentQuantityRanges){if(this.currentQuantityRanges.hasOwnProperty(e)){d=this.currentQuantityRanges[e];if(parseInt(g)>=parseInt(d.SORT_FROM)&&(d.SORT_TO=="INF"||parseInt(g)<=parseInt(d.SORT_TO))){f=true;this.currentQuantityRangeSelected=d.HASH;break}}}if(!f&&(d=this.getMinPriceRange())){this.currentQuantityRangeSelected=d.HASH}for(var c in this.currentPrices){if(this.currentPrices.hasOwnProperty(c)){if(this.currentPrices[c].QUANTITY_HASH==this.currentQuantityRangeSelected){this.currentPriceSelected=c;break}}}},getMinPriceRange:function(){var c;for(var d in this.currentQuantityRanges){if(this.currentQuantityRanges.hasOwnProperty(d)){if(!c||parseInt(this.currentQuantityRanges[d].SORT_FROM)<parseInt(c.SORT_FROM)){c=this.currentQuantityRanges[d]}}}return c}}}if(!!b.JCCatalogElement){return}var a=function(c){a.superclass.constructor.apply(this,arguments);this.nameNode=BX.create("span",{props:{className:"bx_medium bx_bt_button",id:this.id},style:typeof(c.style)==="object"?c.style:{},text:c.text});this.buttonNode=BX.create("span",{attrs:{className:c.ownerClass},children:[this.nameNode],events:this.contextEvents});if(BX.browser.IsIE()){this.buttonNode.setAttribute("hideFocus","hidefocus")}};BX.extend(a,BX.PopupWindowButton);b.JCCatalogElement=function(c){this.skuVisualParams={SELECT:{TAG_BIND:"select",TAG:"option",ACTIVE_CLASS:"active",HIDE_CLASS:"hidden",EVENT:"change",},LI:{TAG_BIND:"li",TAG:"li",ACTIVE_CLASS:"active",HIDE_CLASS:"missing",EVENT:"click",}};this.productType=0;this.config={useCatalog:true,showQuantity:true,showPrice:true,showAbsent:true,showOldPrice:false,showPercent:false,showSkuProps:false,showOfferGroup:false,useCompare:false,mainPictureMode:"IMG",showBasisPrice:false,basketAction:["BUY"],showClosePopup:false};this.basketLinkURL="";this.checkQuantity=false;this.maxQuantity=0;this.SliderImages=0;this.defaultCount=1;this.stepQuantity=1;this.isDblQuantity=false;this.canBuy=true;this.currentBasisPrice={};this.canSubscription=true;this.currentIsSet=false;this.updateViewedCount=false;this.currentPriceMode="";this.currentPrices=[];this.currentPriceSelected=0;this.currentQuantityRanges=[];this.currentQuantityRangeSelected=0;this.precision=6;this.precisionFactor=Math.pow(10,this.precision);this.listID={main:["PICT_ID","BIG_SLIDER_ID","BIG_IMG_CONT_ID"],stickers:["STICKER_ID"],productSlider:["SLIDER_CONT","SLIDER_LIST","SLIDER_LEFT","SLIDER_RIGHT"],offerSlider:["SLIDER_CONT_OF_ID","SLIDER_LIST_OF_ID","SLIDER_LEFT_OF_ID","SLIDER_RIGHT_OF_ID"],offerSliderMobile:["SLIDER_CONT_OFM_ID","SLIDER_LIST_OFM_ID","SLIDER_LEFT_OFM_ID","SLIDER_RIGHT_OFM_ID"],offers:["TREE_ID","TREE_ITEM_ID","DISPLAY_PROP_DIV","DISPLAY_PROP_ARTICLE_DIV","OFFER_GROUP"],quantity:["QUANTITY_ID","QUANTITY_UP_ID","QUANTITY_DOWN_ID","QUANTITY_MEASURE","QUANTITY_LIMIT","BASIS_PRICE"],price:["PRICE_ID"],oldPrice:["OLD_PRICE_ID","DISCOUNT_VALUE_ID"],discountPerc:["DISCOUNT_PERC_ID"],basket:["BASKET_PROP_DIV","BUY_ID","BASKET_LINK","ADD_BASKET_ID","BASKET_ACTIONS_ID","NOT_AVAILABLE_MESS","SUBSCRIBE_ID","SUBSCRIBED_ID"],magnifier:["MAGNIFIER_ID","MAGNIFIER_AREA_ID"],compare:["COMPARE_LINK_ID"]};this.visualPostfix={PICT_ID:"_pict",BIG_SLIDER_ID:"_big_slider",BIG_IMG_CONT_ID:"_bigimg_cont",STICKER_ID:"_sticker",SLIDER_CONT:"_slider_cont",SLIDER_LIST:"_slider_list",SLIDER_LEFT:"_slider_left",SLIDER_RIGHT:"_slider_right",SLIDER_CONT_OF_ID:"_slider_cont_",SLIDER_LIST_OF_ID:"_slider_list_",SLIDER_LEFT_OF_ID:"_slider_left_",SLIDER_RIGHT_OF_ID:"_slider_right_",SLIDER_CONT_OFM_ID:"_sliderm_cont_",SLIDER_LIST_OFM_ID:"_sliderm_list_",SLIDER_LEFT_OFM_ID:"_sliderm_left_",SLIDER_RIGHT_OFM_ID:"_sliderm_right_",TREE_ID:"_skudiv",TREE_ITEM_ID:"_prop_",DISPLAY_PROP_DIV:"_sku_prop",DISPLAY_PROP_ARTICLE_DIV:"_sku_article_prop",QUANTITY_ID:"_quantity",QUANTITY_UP_ID:"_quant_up",QUANTITY_DOWN_ID:"_quant_down",QUANTITY_MEASURE:"_quant_measure",QUANTITY_LIMIT:"_quant_limit",BASIS_PRICE:"_basis_price",PRICE_ID:"_price",OLD_PRICE_ID:"_old_price",DISCOUNT_VALUE_ID:"_price_discount",DISCOUNT_PERC_ID:"_dsc_pict",BASKET_PROP_DIV:"_basket_prop",BUY_ID:"_buy_link",BASKET_LINK:"_basket_link",ADD_BASKET_ID:"_add_basket_link",BASKET_ACTIONS_ID:"_basket_actions",NOT_AVAILABLE_MESS:"_not_avail",SUBSCRIBE_ID:"_subscribe_div",SUBSCRIBED_ID:"_subscribed_div",MAGNIFIER_ID:"_magnifier",MAGNIFIER_AREA_ID:"_magnifier_area",OFFER_GROUP:"_set_group_",COMPARE_LINK_ID:"_compare_link"};this.visual={};this.basketMode="";this.product={checkQuantity:false,maxQuantity:0,stepQuantity:1,startQuantity:1,isDblQuantity:false,canBuy:true,canSubscription:true,name:"",pict:{},id:0,addUrl:"",buyUrl:"",slider:{},sliderCount:0,useSlider:false,sliderPict:[]};this.mess={};this.basketData={useProps:false,emptyProps:false,quantity:"quantity",props:"prop",basketUrl:"",sku_props:"",sku_props_var:"basket_props",add_url:"",buy_url:""};this.compareData={compareUrl:"",comparePath:""};this.defaultPict={preview:null,detail:null};this.offers=[];this.offerNum=0;this.treeProps=[];this.obTreeRows=[];this.showCount=[];this.showStart=[];this.selectedValues={};this.sliders=[];this.obProduct=null;this.obQuantity=null;this.obQuantityUp=null;this.obQuantityDown=null;this.obBasisPrice=null;this.obPict=null;this.obPictAligner=null;this.obPrice={price:null,full:null,discount:null,percent:null};this.obTree=null;this.obBuyBtn=null;this.obBasketBtn=null;this.obAddToBasketBtn=null;this.obBasketActions=null;this.obNotAvail=null;this.obSkuProps=null;this.obSlider=null;this.obMeasure=null;this.obQuantityLimit={all:null,value:null};this.obCompare=null;this.viewedCounter={path:"/bitrix/components/bitrix/catalog.element/ajax.php",params:{AJAX:"Y",SITE_ID:"",PRODUCT_ID:0,PARENT_ID:0}};this.currentImg={src:"",width:0,height:0,screenWidth:0,screenHeight:0,screenOffsetX:0,screenOffsetY:0,scale:1};this.currentBigImg={src:"",};this.obPopupWin=null;this.basketUrl="";this.basketParams={};this.obPopupPict=null;this.magnify={obMagnifier:null,obMagnifyPict:null,obMagnifyArea:null,obBigImg:null,obBigSlider:null,magnifyShow:false,areaParams:{width:100,height:130,left:0,top:0,scaleFactor:1,globalLeft:0,globalTop:0,globalRight:0,globalBottom:0},magnifierParams:{top:0,left:0,width:0,height:0,ratioX:10,ratioY:13,defaultScale:1},magnifyPictParams:{marginTop:0,marginLeft:0,width:0,height:0}};this.treeRowShowSize=5;this.treeEnableArrow={display:"",cursor:"pointer",opacity:1};this.treeDisableArrow={display:"",cursor:"default",opacity:0.2};this.sliderRowShowSize=5;this.sliderEnableArrow={display:"",cursor:"pointer",opacity:1};this.sliderDisableArrow={display:"",cursor:"default",opacity:0.2};this.errorCode=0;if(typeof c==="object"){this.params=c;this.initConfig();if(!!this.params.MESS){this.mess=this.params.MESS}switch(this.productType){case 0:case 1:case 2:this.initProductData();break;case 3:this.initOffersData();break;default:this.errorCode=-1}this.initBasketData();this.initCompareData()}if(0===this.errorCode){BX.ready(BX.delegate(this.Init,this))}this.params={}};b.JCCatalogElement.prototype.Init=function(){var f=0,c=0,h="",e=null,g=null;this.obProduct=BX(this.visual.ID);if(!this.obProduct){this.errorCode=-1}this.obPict=BX(this.visual.PICT_ID);if(!this.obPict){this.errorCode=-2}else{this.obPictAligner=this.obPict.parentNode}if(this.config.showPrice){this.obPrice.price=BX(this.visual.PRICE_ID);if(!this.obPrice.price&&this.config.useCatalog){this.errorCode=-16}else{if(this.config.showOldPrice){this.obPrice.full=BX(this.visual.OLD_PRICE_ID);this.obPrice.discount=BX(this.visual.DISCOUNT_VALUE_ID);if(!!this.obPrice.full){BX.adjust(this.obPrice.full,{style:{display:"none"},html:""})}}if(this.config.showPercent){this.obPrice.percent=BX(this.visual.DISCOUNT_PERC_ID)}}this.obBasketActions=BX(this.visual.BASKET_ACTIONS_ID);if(!!this.obBasketActions){if(BX.util.in_array("BUY",this.config.basketAction)){this.obBuyBtn=BX(this.visual.BUY_ID)}if(BX.util.in_array("ADD",this.config.basketAction)){this.obAddToBasketBtn=BX(this.visual.BUY_ID)}if(!!this.visual.BASKET_LINK){this.obBasketBtn=BX(this.visual.BASKET_LINK)}}this.obNotAvail=BX(this.visual.NOT_AVAILABLE_MESS)}if(this.config.showQuantity){this.obQuantity=BX(this.visual.QUANTITY_ID);if(!!this.visual.QUANTITY_UP_ID){this.obQuantityUp=BX(this.visual.QUANTITY_UP_ID)}if(!!this.visual.QUANTITY_DOWN_ID){this.obQuantityDown=BX(this.visual.QUANTITY_DOWN_ID)}if(this.config.showBasisPrice){this.obBasisPrice=BX(this.visual.BASIS_PRICE)}}if(3===this.productType){if(!!this.visual.TREE_ID){this.obTree=BX(this.visual.TREE_ID);if(!this.obTree){this.errorCode=-256}h=this.visual.TREE_ITEM_ID;for(f=0;f<this.treeProps.length;f++){this.obTreeRows[f]={LEFT:BX(h+this.treeProps[f].ID+"_left"),RIGHT:BX(h+this.treeProps[f].ID+"_right"),LIST:BX(h+this.treeProps[f].ID+"_list"),CONT:BX(h+this.treeProps[f].ID+"_cont")};if(!this.obTreeRows[f].LIST||!this.obTreeRows[f].CONT){this.errorCode=-512;break}}}if(!!this.visual.QUANTITY_MEASURE){this.obMeasure=BX(this.visual.QUANTITY_MEASURE)}if(!!this.visual.QUANTITY_LIMIT){this.obQuantityLimit.all=BX(this.visual.QUANTITY_LIMIT);if(!!this.obQuantityLimit.all){this.obQuantityLimit.value=BX.findChild(this.obQuantityLimit.all,{tagName:"span"},false,false);if(!this.obQuantityLimit.value){this.obQuantityLimit.all=null}}}}if(this.config.showSkuProps){if(!!this.visual.DISPLAY_PROP_DIV){this.obSkuProps=BX(this.visual.DISPLAY_PROP_DIV)}if(!!this.visual.DISPLAY_PROP_ARTICLE_DIV){this.obSkuArticleProps=BX(this.visual.DISPLAY_PROP_ARTICLE_DIV)}}if(this.config.useCompare){this.obCompare=BX(this.visual.COMPARE_LINK_ID)}if(0===this.errorCode){if(this.config.showQuantity){if(!!this.obQuantityUp){BX.bind(this.obQuantityUp,"click",BX.delegate(this.QuantityUp,this))}if(!!this.obQuantityDown){BX.bind(this.obQuantityDown,"click",BX.delegate(this.QuantityDown,this))}if(!!this.obQuantity){BX.bind(this.obQuantity,"change",BX.delegate(this.QuantityChange,this))}}switch(this.productType){case 0:case 1:case 2:if(this.product.useSlider){this.product.slider={COUNT:this.product.sliderCount,ID:this.visual.SLIDER_CONT,CONT:BX(this.visual.SLIDER_CONT),LIST:BX(this.visual.SLIDER_LIST),LEFT:BX(this.visual.SLIDER_LEFT),RIGHT:BX(this.visual.SLIDER_RIGHT),START:0};e=BX.findChildren(this.product.slider.LIST,{tagName:"li"},true);if(!!e&&0<e.length){for(c=0;c<e.length;c++){BX.bind(e[c],"click",BX.delegate(this.ProductSelectSliderImg,this))}}if(!!this.product.slider.LEFT){BX.bind(this.product.slider.LEFT,"click",BX.delegate(this.ProductSliderRowLeft,this));BX.adjust(this.product.slider.LEFT,{style:this.sliderDisableArrow})}if(!!this.product.slider.RIGHT){BX.bind(this.product.slider.RIGHT,"click",BX.delegate(this.ProductSliderRowRight,this));BX.adjust(this.product.slider.RIGHT,{style:this.sliderEnableArrow})}this.setCurrentImg(this.product.sliderPict[0],true)}break;case 3:for(var d in this.skuVisualParams){var g=BX.findChildren(this.obTree,{tagName:this.skuVisualParams[d].TAG_BIND},true);if(!!g&&0<g.length){for(f=0;f<g.length;f++){$(g[f]).on(this.skuVisualParams[d].EVENT,BX.delegate(this.SelectOfferProp,this))}}}for(f=0;f<this.offers.length;f++){this.offers[f].SLIDER_COUNT=parseInt(this.offers[f].SLIDER_COUNT,10);if(isNaN(this.offers[f].SLIDER_COUNT)){this.offers[f].SLIDER_COUNT=0}if(0===this.offers[f].SLIDER_COUNT){this.sliders[f]={COUNT:this.offers[f].SLIDER_COUNT,ID:""}}else{for(c=0;c<this.offers[f].SLIDER.length;c++){this.offers[f].SLIDER[c].WIDTH=parseInt(this.offers[f].SLIDER[c].WIDTH,10);this.offers[f].SLIDER[c].HEIGHT=parseInt(this.offers[f].SLIDER[c].HEIGHT,10)}this.sliders[f]={COUNT:this.offers[f].SLIDER_COUNT,OFFER_ID:this.offers[f].ID,ID:this.visual.SLIDER_CONT_OF_ID+this.offers[f].ID,CONT:BX(this.visual.SLIDER_CONT_OF_ID+this.offers[f].ID),LIST:BX(this.visual.SLIDER_LIST_OF_ID+this.offers[f].ID),CONT_M:BX(this.visual.SLIDER_CONT_OFM_ID+this.offers[f].ID),LIST_M:BX(this.visual.SLIDER_LIST_OFM_ID+this.offers[f].ID),LEFT:BX(this.visual.SLIDER_LEFT_OF_ID+this.offers[f].ID),RIGHT:BX(this.visual.SLIDER_RIGHT_OF_ID+this.offers[f].ID),START:0};e=BX.findChildren(this.sliders[f].LIST,{tagName:"li"},true);if(!!e&&0<e.length){for(c=0;c<e.length;c++){BX.bind(e[c],"click",BX.delegate(this.SelectSliderImg,this))}}if(!!this.sliders[f].LEFT){BX.bind(this.sliders[f].LEFT,"click",BX.delegate(this.SliderRowLeft,this))}if(!!this.sliders[f].RIGHT){BX.bind(this.sliders[f].RIGHT,"click",BX.delegate(this.SliderRowRight,this))}}}this.SetCurrent();break}if(!!this.obBuyBtn){BX.bind(this.obBuyBtn,"click",BX.proxy(this.BuyBasket,this))}if(!!this.obAddToBasketBtn){BX.bind(this.obAddToBasketBtn,"click",BX.proxy(this.Add2Basket,this))}if(!!this.obCompare){BX.bind(this.obCompare,"click",BX.proxy(this.Compare,this))}this.setMainPictHandler();setTimeout(function(){$(".offers_img.wof").css("opacity",1)},400)}};b.JCCatalogElement.prototype.initConfig=function(){this.productType=parseInt(this.params.PRODUCT_TYPE,10);if(!!this.params.CONFIG&&typeof(this.params.CONFIG)==="object"){if(this.params.CONFIG.USE_CATALOG!=="undefined"&&BX.type.isBoolean(this.params.CONFIG.USE_CATALOG)){this.config.useCatalog=this.params.CONFIG.USE_CATALOG}this.config.showQuantity=!!this.params.CONFIG.SHOW_QUANTITY;this.config.showPrice=!!this.params.CONFIG.SHOW_PRICE;this.config.showPercent=!!this.params.CONFIG.SHOW_DISCOUNT_PERCENT;this.config.showOldPrice=!!this.params.CONFIG.SHOW_OLD_PRICE;this.config.showSkuProps=!!this.params.CONFIG.SHOW_SKU_PROPS;this.config.showOfferGroup=!!this.params.CONFIG.OFFER_GROUP;this.config.useCompare=!!this.params.CONFIG.DISPLAY_COMPARE;if(!!this.params.CONFIG.MAIN_PICTURE_MODE){this.config.mainPictureMode=this.params.CONFIG.MAIN_PICTURE_MODE}this.config.showBasisPrice=!!this.params.CONFIG.SHOW_BASIS_PRICE;if(!!this.params.CONFIG.ADD_TO_BASKET_ACTION){this.config.basketAction=this.params.CONFIG.ADD_TO_BASKET_ACTION}this.config.showClosePopup=!!this.params.CONFIG.SHOW_CLOSE_POPUP}else{if(this.params.USE_CATALOG!=="undefined"&&BX.type.isBoolean(this.params.USE_CATALOG)){this.config.useCatalog=this.params.USE_CATALOG}this.config.showQuantity=!!this.params.SHOW_QUANTITY;this.config.showPrice=!!this.params.SHOW_PRICE;this.config.showPercent=!!this.params.SHOW_DISCOUNT_PERCENT;this.config.showOldPrice=!!this.params.SHOW_OLD_PRICE;this.config.showSkuProps=!!this.params.SHOW_SKU_PROPS;this.config.showOfferGroup=!!this.params.OFFER_GROUP;this.config.useCompare=!!this.params.DISPLAY_COMPARE;if(!!this.params.MAIN_PICTURE_MODE){this.config.mainPictureMode=this.params.MAIN_PICTURE_MODE}this.config.showBasisPrice=!!this.params.SHOW_BASIS_PRICE;if(!!this.params.ADD_TO_BASKET_ACTION){this.config.basketAction=this.params.ADD_TO_BASKET_ACTION}this.config.showClosePopup=!!this.params.SHOW_CLOSE_POPUP}if(!this.params.VISUAL||typeof(this.params.VISUAL)!=="object"||!this.params.VISUAL.ID){this.errorCode=-1;return}this.visual.ID=this.params.VISUAL.ID;this.basketLinkURL=this.params.BASKET.BASKET_URL;this.defaultCount=this.params.DEFAULT_COUNT;this.storeQuanity=BX(this.params.STORE_QUANTITY);this.initVisualParams("main");if(this.config.showQuantity){this.initVisualParams("quantity")}if(this.config.showPrice){this.initVisualParams("price")}if(this.config.showOldPrice){this.initVisualParams("oldPrice")}if(this.config.showPercent){this.initVisualParams("discountPerc")}this.initVisualParams("basket");if(this.config.mainPictureMode==="MAGNIFIER"){this.initVisualParams("magnifier")}if(this.config.useCompare){this.initVisualParams("compare")}};b.JCCatalogElement.prototype.initVisualParams=function(c){var e=0,d="";if(!this.listID[c]){this.errorCode=-1;return}for(e=0;e<this.listID[c].length;e++){d=this.listID[c][e];this.visual[d]=(!!this.params.VISUAL[d]?this.params.VISUAL[d]:this.visual.ID+this.visualPostfix[d])}};b.JCCatalogElement.prototype.initProductData=function(){var c=0;this.initVisualParams("productSlider");if(!!this.params.PRODUCT&&"object"===typeof(this.params.PRODUCT)){if(this.config.showQuantity){this.product.checkQuantity=this.params.PRODUCT.CHECK_QUANTITY;this.product.isDblQuantity=this.params.PRODUCT.QUANTITY_FLOAT;if(this.product.checkQuantity){this.product.maxQuantity=(this.product.isDblQuantity?parseFloat(this.params.PRODUCT.MAX_QUANTITY):parseInt(this.params.PRODUCT.MAX_QUANTITY,10))}this.product.stepQuantity=(this.product.isDblQuantity?parseFloat(this.params.PRODUCT.STEP_QUANTITY):parseInt(this.params.PRODUCT.STEP_QUANTITY,10));this.checkQuantity=this.product.checkQuantity;this.isDblQuantity=this.product.isDblQuantity;this.maxQuantity=this.product.maxQuantity;this.stepQuantity=this.product.stepQuantity;if(this.isDblQuantity){this.stepQuantity=Math.round(this.stepQuantity*this.precisionFactor)/this.precisionFactor}}this.product.canBuy=this.params.PRODUCT.CAN_BUY;this.product.canSubscription=this.params.PRODUCT.SUBSCRIPTION;if(this.config.showPrice){this.currentBasisPrice=this.params.PRODUCT.BASIS_PRICE}this.canBuy=this.product.canBuy;this.canSubscription=this.product.canSubscription;this.product.name=this.params.PRODUCT.NAME;this.product.pict=this.params.PRODUCT.PICT;this.product.id=this.params.PRODUCT.ID;if(!!this.params.PRODUCT.ADD_URL){this.product.addUrl=this.params.PRODUCT.ADD_URL}if(!!this.params.PRODUCT.BUY_URL){this.product.buyUrl=this.params.PRODUCT.BUY_URL}if(!!this.params.PRODUCT.SLIDER_COUNT){this.product.sliderCount=parseInt(this.params.PRODUCT.SLIDER_COUNT,10);if(isNaN(this.product.sliderCount)){this.product.sliderCount=0}if(0<this.product.sliderCount&&!!this.params.PRODUCT.SLIDER.length&&0<this.params.PRODUCT.SLIDER.length){for(c=0;c<this.params.PRODUCT.SLIDER.length;c++){this.product.useSlider=true;this.params.PRODUCT.SLIDER[c].WIDTH=parseInt(this.params.PRODUCT.SLIDER[c].WIDTH,10);this.params.PRODUCT.SLIDER[c].HEIGHT=parseInt(this.params.PRODUCT.SLIDER[c].HEIGHT,10)}this.product.sliderPict=this.params.PRODUCT.SLIDER;this.setCurrentImg(this.product.sliderPict[0],false)}}this.currentIsSet=true}else{this.errorCode=-1}};b.JCCatalogElement.prototype.initOffersData=function(){this.initVisualParams("offerSlider");this.initVisualParams("offerSliderMobile");this.initVisualParams("offers");if(!!this.params.OFFERS&&BX.type.isArray(this.params.OFFERS)){this.offers=this.params.OFFERS;this.offerNum=0;if(!!this.params.OFFER_SELECTED){this.offerNum=parseInt(this.params.OFFER_SELECTED,10);if("offers" in this){if(this.offers.length){var f=parseUrlQuery(),c=this.params.SKU_DETAIL_ID,e=0;if("oid" in f){e=f.oid}if(e){for(var d in this.offers){if(this.offers[d].ID==e){this.offerNum=parseInt(d,10)}}}}}}if(isNaN(this.offerNum)){this.offerNum=0}if(!!this.params.TREE_PROPS){this.treeProps=this.params.TREE_PROPS}if(!!this.params.DEFAULT_PICTURE){this.defaultPict.preview=this.params.DEFAULT_PICTURE.PREVIEW_PICTIRE;this.defaultPict.detail=this.params.DEFAULT_PICTURE.DETAIL_PICTURE}if(!!this.params.PRODUCT&&typeof(this.params.PRODUCT)==="object"){this.product.id=parseInt(this.params.PRODUCT.ID,10);this.product.name=this.params.PRODUCT.NAME}}else{this.errorCode=-1}};b.JCCatalogElement.prototype.initBasketData=function(){if(!!this.params.BASKET&&"object"===typeof(this.params.BASKET)){if(1===this.productType||2===this.productType){this.basketData.useProps=!!this.params.BASKET.ADD_PROPS;this.basketData.emptyProps=!!this.params.BASKET.EMPTY_PROPS}if(!!this.params.BASKET.QUANTITY){this.basketData.quantity=this.params.BASKET.QUANTITY}if(!!this.params.BASKET.PROPS){this.basketData.props=this.params.BASKET.PROPS}if(!!this.params.BASKET.BASKET_URL){this.basketData.basketUrl=this.params.BASKET.BASKET_URL}if(3===this.productType){if(!!this.params.BASKET.SKU_PROPS){this.basketData.sku_props=this.params.BASKET.SKU_PROPS}}if(!!this.params.BASKET.ADD_URL_TEMPLATE){this.basketData.add_url=this.params.BASKET.ADD_URL_TEMPLATE}if(!!this.params.BASKET.BUY_URL_TEMPLATE){this.basketData.buy_url=this.params.BASKET.BUY_URL_TEMPLATE}if(this.basketData.add_url===""&&this.basketData.buy_url===""){this.errorCode=-1024}}};b.JCCatalogElement.prototype.initCompareData=function(){if(this.config.useCompare){if(!!this.params.COMPARE&&typeof(this.params.COMPARE)==="object"){if(!!this.params.COMPARE.COMPARE_PATH){this.compareData.comparePath=this.params.COMPARE.COMPARE_PATH}if(!!this.params.COMPARE.COMPARE_URL_TEMPLATE_DEL){this.compareData.compareUrlDel=this.params.COMPARE.COMPARE_URL_TEMPLATE_DEL}if(!!this.params.COMPARE.COMPARE_URL_TEMPLATE){this.compareData.compareUrl=this.params.COMPARE.COMPARE_URL_TEMPLATE}else{this.config.useCompare=false}}else{this.config.useCompare=false}}};b.JCCatalogElement.prototype.setMainPictHandler=function(){switch(this.config.mainPictureMode){case"GALLERY":break;case"MAGNIFIER":$(this.obPict).addClass("zoom_picture");InitZoomPict();break;case"POPUP":$(this.obPict).parent().addClass("fancy_offer");break;default:break}};b.JCCatalogElement.prototype.setCurrentImg=function(c,d){d=!!d;if("SMALL" in c){this.currentImg.src=c.SMALL.src}else{if("SRC" in c){this.currentImg.src=c.SRC}}if("BIG" in c){this.currentBigImg.src=c.BIG.src}if("WIDTH" in c){this.currentImg.width=c.WIDTH}if("HEIGHT" in c){this.currentImg.height=c.HEIGHT}if(d&&!!this.obPict){if(this.config.mainPictureMode==="MAGNIFIER"){$(this.obPict).attr("data-large",this.currentBigImg.src);$(this.obPict).attr("xoriginal",this.currentBigImg.src);$(this.obPict).attr("xpreview",c.SMALL.src)}if("src" in this.currentImg){if(this.currentImg.src){BX.adjust(this.obPict,{props:{src:this.currentImg.src}})}}if("src" in this.currentBigImg){if(this.currentBigImg.src){if(this.config.mainPictureMode==="POPUP"){$(this.obPict).parent().attr("href",this.currentBigImg.src)}$(this.obPict).parent().attr("title",c.TITLE);$(this.obPict).parent().attr("alt",c.ALT);$(this.obPict).attr("title",c.TITLE);$(this.obPict).attr("alt",c.ALT)}}}};b.JCCatalogElement.prototype.scaleImg=function(h,f){var e,d,g,c={};if(f.width>=h.width&&f.height>=h.height){c.width=h.width;c.height=h.height}else{e=f.width/h.width;d=f.height/h.height;g=Math.min(e,d);c.width=Math.max(1,parseInt(g*h.width,10));c.height=Math.max(1,parseInt(g*h.height,10))}return c};b.JCCatalogElement.prototype.showMagnifier=function(c){if(!this.magnify.magnifyShow){this.calcMagnifierParams();this.calcMagnifyAreaSize();this.calcMagnifyAreaPos(c);this.calcMagnifyPictSize();this.calcMagnifyPictPos();this.setMagnifyAreaParams(true);this.setMagnifyPictParams(true);this.setMagnifierParams(true);BX.bind(document,"mousemove",BX.proxy(this.moveMagnifierArea,this))}};b.JCCatalogElement.prototype.hideMagnifier=function(){if(!this.magnify.magnifyShow){if(!!this.magnify.obMagnifier){BX.adjust(this.magnify.obMagnifier,{style:{display:"none"}})}if(!!this.magnify.obMagnifyArea){BX.adjust(this.magnify.obMagnifyArea,{style:{display:"none"}})}BX.unbind(document,"mousemove",BX.proxy(this.moveMagnifierArea,this))}};b.JCCatalogElement.prototype.moveMagnifierArea=function(g){var d={X:0,Y:0},i=BX.pos(this.obPict),c={},h={},f={};d=this.inRect(g,i);if(this.inBound(i,d)){c=this.intersectArea(d,i);switch(c.X){case -1:this.magnify.areaParams.left=this.currentImg.screenOffsetX;break;case 0:this.magnify.areaParams.left=this.currentImg.screenOffsetX+d.X-(this.magnify.areaParams.width>>>1);break;case 1:this.magnify.areaParams.left=this.currentImg.screenOffsetX+i.width-this.magnify.areaParams.width;break}switch(c.Y){case -1:this.magnify.areaParams.top=0;break;case 0:this.magnify.areaParams.top=d.Y-(this.magnify.areaParams.height>>>1);break;case 1:this.magnify.areaParams.top=i.height-this.magnify.areaParams.height;break}this.magnify.magnifyPictParams.marginLeft=-parseInt(((this.magnify.areaParams.left-this.currentImg.screenOffsetX)*this.currentImg.scale),10);this.magnify.magnifyPictParams.marginTop=-parseInt(((this.magnify.areaParams.top)*this.currentImg.scale),10);h.left=this.magnify.areaParams.left+"px";h.top=this.magnify.areaParams.top+"px";BX.adjust(this.magnify.obMagnifyArea,{style:h});f.marginLeft=this.magnify.magnifyPictParams.marginLeft+"px";f.marginTop=this.magnify.magnifyPictParams.marginTop+"px";BX.adjust(this.magnify.obMagnifyPict,{style:f})}else{this.outMagnifierArea();this.hideMagnifier()}};b.JCCatalogElement.prototype.onMagnifierArea=function(){this.magnify.magnifyShow=true};b.JCCatalogElement.prototype.outMagnifierArea=function(){this.magnify.magnifyShow=false};b.JCCatalogElement.prototype.calcMagnifierParams=function(){if(!!this.magnify.obBigImg){var c=BX.pos(this.magnify.obBigImg,true);this.magnify.magnifierParams.width=c.width;this.magnify.magnifierParams.height=c.height;this.magnify.magnifierParams.top=c.top;this.magnify.magnifierParams.left=c.left+c.width+2}};b.JCCatalogElement.prototype.setMagnifierParams=function(c){if(!!this.magnify.obMagnifier){c=!!c;var d={top:this.magnify.magnifierParams.top+"px",left:this.magnify.magnifierParams.left+"px",width:this.magnify.magnifierParams.width+"px",height:this.magnify.magnifierParams.height+"px"};if(c){d.display=""}BX.adjust(this.magnify.obMagnifier,{style:d})}};b.JCCatalogElement.prototype.setMagnifyAreaParams=function(c){if(!!this.magnify.obMagnifier){c=!!c;var d={top:this.magnify.areaParams.top+"px",left:this.magnify.areaParams.left+"px",width:this.magnify.areaParams.width+"px",height:this.magnify.areaParams.height+"px"};if(c){d.display=""}BX.adjust(this.magnify.obMagnifyArea,{style:d})}};b.JCCatalogElement.prototype.calcMagnifyAreaPos=function(f){var d,g,c;g=BX.pos(this.obPict);d=this.inRect(f,g);if(this.inBound(g,d)){c=this.intersectArea(d,g);switch(c.X){case -1:this.magnify.areaParams.left=this.currentImg.screenOffsetX;break;case 0:this.magnify.areaParams.left=this.currentImg.screenOffsetX+d.X-(this.magnify.areaParams.width>>>1);break;case 1:this.magnify.areaParams.left=this.currentImg.screenOffsetX+g.width-this.magnify.areaParams.width;break}switch(c.Y){case -1:this.magnify.areaParams.top=0;break;case 0:this.magnify.areaParams.top=d.Y-(this.magnify.areaParams.height>>>1);break;case 1:this.magnify.areaParams.top=g.height-this.magnify.areaParams.height;break}}};b.JCCatalogElement.prototype.inBound=function(d,c){return((0<=c.Y&&d.height>=c.Y)&&(0<=c.X&&d.width>=c.X))};b.JCCatalogElement.prototype.inRect=function(g,f){var d=BX.GetWindowSize(),c={X:0,Y:0,globalX:0,globalY:0};c.globalX=g.clientX+d.scrollLeft;c.X=c.globalX-f.left;c.globalY=g.clientY+d.scrollTop;c.Y=c.globalY-f.top;return c};b.JCCatalogElement.prototype.intersectArea=function(e,g){var c={X:0,Y:0},f=this.magnify.areaParams.width>>>1,d=this.magnify.areaParams.height>>>1;if(e.X<=f){c.X=-1}else{if(e.X>=(g.width-f)){c.X=1}else{c.X=0}}if(e.Y<=d){c.Y=-1}else{if(e.Y>=(g.height-d)){c.Y=1}else{c.Y=0}}return c};b.JCCatalogElement.prototype.calcMagnifyAreaSize=function(){var d,c,e;if(this.magnify.magnifierParams.width<this.currentImg.width&&this.magnify.magnifierParams.height<this.currentImg.height){d=this.magnify.obBigImg.offsetWidth/this.currentImg.width;c=this.magnify.obBigImg.offsetHeight/this.currentImg.height;e=Math.min(d,c);this.currentImg.scale=1/e;this.magnify.areaParams.width=Math.max(1,parseInt(e*this.magnify.magnifierParams.width,10));this.magnify.areaParams.height=Math.max(1,parseInt(e*this.magnify.magnifierParams.height,10));this.magnify.areaParams.scaleFactor=this.magnify.magnifierParams.defaultScale}else{d=this.obPict.offsetWidth/this.magnify.obBigImg.offsetWidth;c=this.obPict.offsetHeight/this.magnify.obBigImg.offsetHeight;e=Math.min(d,c);this.currentImg.scale=1/e;this.magnify.areaParams.width=Math.max(1,parseInt(e*this.magnify.magnifierParams.width,10));this.magnify.areaParams.height=Math.max(1,parseInt(e*this.magnify.magnifierParams.height,10));d=this.magnify.magnifierParams.width/this.currentImg.width;c=this.magnify.magnifierParams.height/this.currentImg.height;e=Math.max(d,c);this.magnify.areaParams.scaleFactor=e}};b.JCCatalogElement.prototype.calcMagnifyPictSize=function(){this.magnify.magnifyPictParams.width=this.currentImg.width*this.magnify.areaParams.scaleFactor;this.magnify.magnifyPictParams.height=this.currentImg.height*this.magnify.areaParams.scaleFactor};b.JCCatalogElement.prototype.calcMagnifyPictPos=function(){this.magnify.magnifyPictParams.marginLeft=-parseInt(((this.magnify.areaParams.left-this.currentImg.screenOffsetX)*this.currentImg.scale),10);this.magnify.magnifyPictParams.marginTop=-parseInt(((this.magnify.areaParams.top)*this.currentImg.scale),10)};b.JCCatalogElement.prototype.setMagnifyPictParams=function(c){if(!!this.magnify.obMagnifier){c=!!c;var d={width:this.magnify.magnifyPictParams.width+"px",height:this.magnify.magnifyPictParams.height+"px",marginTop:this.magnify.magnifyPictParams.marginTop+"px",marginLeft:this.magnify.magnifyPictParams.marginLeft+"px"};if(c){d.display=""}BX.adjust(this.magnify.obMagnifyPict,{style:d,props:{src:this.currentImg.src}})}};b.JCCatalogElement.prototype.ProductSliderRowLeft=function(){var c=BX.proxy_context;if(!!c){if(this.sliderRowShowSize<this.product.slider.COUNT){if(0>this.product.slider.START){this.product.slider.START++;BX.adjust(this.product.slider.LIST,{style:{marginLeft:this.product.slider.START*20+"%"}});BX.adjust(this.product.slider.RIGHT,{style:this.sliderEnableArrow})}if(0<=this.product.slider.START){BX.adjust(this.product.slider.LEFT,{style:this.sliderDisableArrow})}}}};b.JCCatalogElement.prototype.ProductSliderRowRight=function(){var c=BX.proxy_context;if(!!c){if(this.sliderRowShowSize<this.product.slider.COUNT){if((this.sliderRowShowSize-this.product.slider.START)<this.product.slider.COUNT){this.product.slider.START--;BX.adjust(this.product.slider.LIST,{style:{marginLeft:this.product.slider.START*20+"%"}});BX.adjust(this.product.slider.LEFT,{style:this.sliderEnableArrow})}if((this.sliderRowShowSize-this.product.slider.START)>=this.product.slider.COUNT){BX.adjust(this.product.slider.RIGHT,{style:this.sliderDisableArrow})}}}};b.JCCatalogElement.prototype.ProductSelectSliderImg=function(){var d="",c=BX.proxy_context;if(!!c&&c.hasAttribute("data-value")){d=c.getAttribute("data-value");this.SetProductMainPict(d)}};b.JCCatalogElement.prototype.SetProductMainPict=function(g){var c=-1,e=0,d=0,f="",h="",k=null;if(0<this.product.sliderCount){for(d=0;d<this.product.sliderPict.length;d++){if(g===this.product.sliderPict[d].ID){c=d;break}}if(-1<c){if(!!this.product.sliderPict[c]){this.setCurrentImg(this.product.sliderPict[c],true)}k=BX.findChildren(this.product.slider.LIST,{tagName:"li"},false);if(!!k&&0<k.length){h=g;for(e=0;e<k.length;e++){f=k[e].getAttribute("data-value");if(f===h){BX.addClass(k[e],"active")}else{BX.removeClass(k[e],"active")}}}}}};b.JCCatalogElement.prototype.SliderRowLeft=function(){var f="",c=-1,d,e=BX.proxy_context;if(!!e&&e.hasAttribute("data-value")){f=e.getAttribute("data-value");for(d=0;d<this.sliders.length;d++){if(this.sliders[d].OFFER_ID===f){c=d;break}}if(-1<c&&this.sliderRowShowSize<this.sliders[c].COUNT){if(0>this.sliders[c].START){this.sliders[c].START++;BX.adjust(this.sliders[c].LIST,{style:{marginLeft:this.sliders[c].START*20+"%"}});BX.adjust(this.sliders[c].RIGHT,{style:this.sliderEnableArrow})}if(0<=this.sliders[c].START){BX.adjust(this.sliders[c].LEFT,{style:this.sliderDisableArrow})}}}};b.JCCatalogElement.prototype.SliderRowRight=function(){var f="",c=-1,d,e=BX.proxy_context;if(!!e&&e.hasAttribute("data-value")){f=e.getAttribute("data-value");for(d=0;d<this.sliders.length;d++){if(this.sliders[d].OFFER_ID===f){c=d;break}}if(-1<c&&this.sliderRowShowSize<this.sliders[c].COUNT){if((this.sliderRowShowSize-this.sliders[c].START)<this.sliders[c].COUNT){this.sliders[c].START--;BX.adjust(this.sliders[c].LIST,{style:{marginLeft:this.sliders[c].START*20+"%"}});BX.adjust(this.sliders[c].LEFT,{style:this.sliderEnableArrow})}if((this.sliderRowShowSize-this.sliders[c].START)>=this.sliders[c].COUNT){BX.adjust(this.sliders[c].RIGHT,{style:this.sliderDisableArrow})}}}};b.JCCatalogElement.prototype.SelectSliderImg=function(){var e="",d=[],c=BX.proxy_context;if(!!c&&c.hasAttribute("data-value")){e=c.getAttribute("data-value");d=e.split("_");this.SetMainPict(d[0],d[1])}};b.JCCatalogElement.prototype.SetMainPict=function(h,m){var f=-1,l=-1,d,c,k="",e=null,g="";for(d=0;d<this.offers.length;d++){if(h===this.offers[d].ID){f=d;break}}$(".thumbs_navigation ul").addClass("hidden_block");if(this.SliderImages>1){$(".thumbs_navigation ul:eq("+f+")").removeClass("hidden_block")}$(".thumbs_navigation").removeClass("hidden_block");$(".fancy_offer").addClass("hidden_block");$(this.obPict).closest(".offers_img").css("opacity",0);if(-1<f){if(0<this.offers[f].SLIDER_COUNT){for(c=0;c<this.offers[f].SLIDER.length;c++){if(m===this.offers[f].SLIDER[c].ID){l=c;break}}if(-1<l){if(!!this.offers[f].SLIDER[l]){this.setCurrentImg(this.offers[f].SLIDER[l],true)}e=BX.findChildren(this.sliders[f].LIST,{tagName:"li"},false);if(!!e&&0<e.length){g=h+"_"+m;for(d=0;d<e.length;d++){k=e[d].getAttribute("data-value");if(k===g){BX.addClass(e[d],"current")}else{BX.removeClass(e[d],"current")}}}}}}setTimeout(function(){$(".fancy_offer").removeClass("hidden_block");$(".offers_img").css("opacity",1)},200)};b.JCCatalogElement.prototype.SetMainPictFromItem=function(e){if(!!this.obPict){var d=false,c={};if(!!this.offers[e]){if(!!this.offers[e].DETAIL_PICTURE){c=this.offers[e].DETAIL_PICTURE;d=true}else{if(!!this.offers[e].PREVIEW_PICTURE){c=this.offers[e].PREVIEW_PICTURE;d=true}}}if(!d){if(!!this.defaultPict.detail){c=this.defaultPict.detail;d=true}else{if(!!this.defaultPict.preview){c=this.defaultPict.preview;d=true}}}if(d){this.setCurrentImg(c,true)}}};b.JCCatalogElement.prototype.SetAdditionalGallery=function(h){var k=$(".galerys-block");if(k.length){var l=k.hasClass("hidden");var e=k.find(".big_slider").length;var j=e?k.find(".big_slider"):k.find(".small_slider");if(j.length){if($.hasData(j[0])){$.removeData(j[0]);j.find(".flex-control-nav").remove();j.find(".flex-direction-nav").remove()}var c=ethumbs="";if(this.offers[h].ADDITIONAL_GALLERY.length){for(var g in this.offers[h].ADDITIONAL_GALLERY){var f=this.offers[h].ADDITIONAL_GALLERY[g];if(e){c+='<li class="col-md-12 item"><a href="'+f.DETAIL.SRC+'" class="fancy" rel="gallery" target="_blank" title="'+f.TITLE+'"><img src="'+f.PREVIEW.src+'" class="img-responsive inline" title="'+f.TITLE+'" alt="'+f.ALT+'" /><span class="zoom"></span></li>';ethumbs+='<li class="item"><img class="img-responsive inline" border="0" src="'+f.THUMB.src+'" title="'+f.TITLE+'" alt="'+f.ALT+'" /></li>'}else{c+='<li class="col-md-3 item visible"><div><img src="'+f.PREVIEW.src+'" class="img-responsive inline" title="'+f.TITLE+'" alt="'+f.ALT+'" /></div><a href="'+f.DETAIL.SRC+'" class="fancy dark_block_animate" rel="gallery" target="_blank" title="'+f.TITLE+'"></a></li>'}}}j.find(".slides").html(c);j.removeClass("flexslider-init");if(e){var m=k.find(".ethumbs");if(m.length){if($.hasData(m[0])){$.removeData(m[0]);m.find(".flex-control-nav").remove();m.find(".flex-direction-nav").remove()}m.find(".slides").html(ethumbs);m.removeClass("flexslider-init")}}if(this.offers[h].ADDITIONAL_GALLERY.length){if(l){k.removeClass("hidden")}InitFlexSlider();var d=setInterval(function(){if(j.find(".slides .item").attr("style").indexOf("height")===-1){$(b).resize()}else{clearInterval(d)}},100)}else{k.addClass("hidden")}}}};b.JCCatalogElement.prototype.showMainPictPopup=function(c){var d="";d='<div style="text-align: center;"><img src="'+this.currentImg.src+'" width="'+this.currentImg.width+'" height="'+this.currentImg.height+'" name=""></div>';this.obPopupPict.setContent(d);this.obPopupPict.show();return BX.PreventDefault(c)};b.JCCatalogElement.prototype.QuantityUp=function(){var e=0,c=true,d;if(0===this.errorCode&&this.config.showQuantity&&this.canBuy){e=(this.isDblQuantity?parseFloat(this.obQuantity.value):parseInt(this.obQuantity.value,10));if(!isNaN(e)){e+=this.stepQuantity;if(this.checkQuantity){if(e>this.maxQuantity){c=false}}if(c){if(this.isDblQuantity){e=Math.round(e*this.precisionFactor)/this.precisionFactor}this.obQuantity.value=e}}}};b.JCCatalogElement.prototype.QuantityDown=function(){var e=0,c=true,d;if(0===this.errorCode&&this.config.showQuantity&&this.canBuy){e=(this.isDblQuantity?parseFloat(this.obQuantity.value):parseInt(this.obQuantity.value,10));if(!isNaN(e)){e-=this.stepQuantity;if(e<this.stepQuantity){c=false}if(c){if(this.isDblQuantity){e=Math.round(e*this.precisionFactor)/this.precisionFactor}this.obQuantity.value=e}}}};b.JCCatalogElement.prototype.QuantityChange=function(){var f=0,e,c,d;if(0===this.errorCode&&this.config.showQuantity){if(this.canBuy){f=(this.isDblQuantity?parseFloat(this.obQuantity.value):parseInt(this.obQuantity.value,10));if(!isNaN(f)){if(this.checkQuantity){if(f>this.maxQuantity){f=this.maxQuantity}}if(f<this.stepQuantity){f=this.stepQuantity}else{d=Math.round((f*this.precisionFactor)/this.stepQuantity)/this.precisionFactor;c=parseInt(d,10);if(isNaN(c)){c=1;d=1.1}if(d>c){f=(c<=1?this.stepQuantity:c*this.stepQuantity);f=Math.round(f*this.precisionFactor)/this.precisionFactor}}this.obQuantity.value=f}else{this.obQuantity.value=this.stepQuantity}}else{this.obQuantity.value=this.stepQuantity}}};b.JCCatalogElement.prototype.QuantitySet=function(e){var c="",d;if(this.errorCode===0){this.canBuy=this.offers[e].CAN_BUY;this.currentPriceMode=this.offers[e].ITEM_PRICE_MODE;this.currentPrices=this.offers[e].ITEM_PRICES;this.currentPriceSelected=this.offers[e].ITEM_PRICE_SELECTED;this.currentQuantityRanges=this.offers[e].ITEM_QUANTITY_RANGES;this.currentQuantityRangeSelected=this.offers[e].ITEM_QUANTITY_RANGE_SELECTED;if(this.canBuy){if(!!this.obBasketActions){BX.style(this.obBasketActions,"display","")}if(!!this.obNotAvail){BX.style(this.obNotAvail,"display","none")}}else{if(!!this.obBasketActions){BX.style(this.obBasketActions,"opacity","0");BX.style(BX.findParent(BX(this.obQuantity),{"class":"counter_block"}),"display","none")}if(!!this.obNotAvail){BX.style(this.obNotAvail,"display","")}}if(this.config.showQuantity){this.isDblQuantity=this.offers[e].QUANTITY_FLOAT;this.checkQuantity=this.offers[e].CHECK_QUANTITY;if(this.isDblQuantity){this.maxQuantity=parseFloat(this.offers[e].MAX_QUANTITY);this.stepQuantity=Math.round(parseFloat(this.offers[e].STEP_QUANTITY)*this.precisionFactor)/this.precisionFactor}else{this.maxQuantity=parseInt(this.offers[e].MAX_QUANTITY,10);this.stepQuantity=parseInt(this.offers[e].STEP_QUANTITY,10)}if(!!this.obMeasure){if(!!this.offers[e].MEASURE){BX.adjust(this.obMeasure,{html:this.offers[e].MEASURE})}else{BX.adjust(this.obMeasure,{html:""})}}if(!!this.obQuantityLimit.all){if(!this.checkQuantity){BX.adjust(this.obQuantityLimit.value,{html:""});BX.adjust(this.obQuantityLimit.all,{style:{display:"none"}})}else{d=this.offers[e].MAX_QUANTITY;if(!!this.offers[e].MEASURE){d+=(" "+this.offers[e].MEASURE)}BX.adjust(this.obQuantityLimit.value,{html:d});BX.adjust(this.obQuantityLimit.all,{style:{display:""}})}}if(!!this.obBasisPrice){if(!!this.offers[e].BASIS_PRICE){c=BX.message("BASIS_PRICE_MESSAGE");c=c.replace("#PRICE#",BX.Currency.currencyFormat(this.offers[e].BASIS_PRICE.DISCOUNT_VALUE,this.offers[e].BASIS_PRICE.CURRENCY,true));c=c.replace("#MEASURE#",this.offers[e].MEASURE);BX.adjust(this.obBasisPrice,{style:{display:""},html:c})}else{BX.adjust(this.obBasisPrice,{style:{display:"none"},html:""})}}}this.currentBasisPrice=this.offers[e].BASIS_PRICE}};b.JCCatalogElement.prototype.SelectOfferProp=function(){var c=0,d="",f=[],g=null,e=BX.proxy_context;if(typeof e.options!=="undefined"&&typeof e.options[e.selectedIndex]!=="undefined"){e=e.options[e.selectedIndex]}if(!!e&&e.hasAttribute("data-treevalue")){d=e.getAttribute("data-treevalue");propModes=e.getAttribute("data-showtype");f=d.split("_");this.SearchOfferPropIndex(f[0],f[1]);g=BX.findChildren(e.parentNode,{tagName:this.skuVisualParams[propModes.toUpperCase()].TAG},false);if(!!g&&0<g.length){for(c=0;c<g.length;c++){value=g[c].getAttribute("data-onevalue");if(propModes=="TEXT"){if(value===f[1]){g[c].setAttribute("selected","selected")}else{g[c].removeAttribute("selected")}}else{if(value===f[1]){$(g[c]).addClass(this.skuVisualParams[propModes.toUpperCase()].ACTIVE_CLASS)}else{$(g[c]).removeClass(this.skuVisualParams[propModes.toUpperCase()].ACTIVE_CLASS)}}}}}};b.JCCatalogElement.prototype.SearchOfferPropIndex=function(e,n){var k="",o=false,l=[],c=[],g=-1,f,d,h={},m=[];for(f=0;f<this.treeProps.length;f++){if(this.treeProps[f].ID===e){g=f;break}}if(-1<g){for(f=0;f<g;f++){k="PROP_"+this.treeProps[f].ID;h[k]=this.selectedValues[k]}k="PROP_"+this.treeProps[g].ID;h[k]=n;for(f=g+1;f<this.treeProps.length;f++){k="PROP_"+this.treeProps[f].ID;o=this.GetRowValues(h,k);if(!o){break}c=[];if(this.config.showAbsent){l=[];m=[];m=BX.clone(h,true);for(d=0;d<o.length;d++){m[k]=o[d];c[c.length]=o[d];if(this.GetCanBuy(m)){l[l.length]=o[d]}}}else{l=o}if(this.selectedValues[k]&&BX.util.in_array(this.selectedValues[k],l)){h[k]=this.selectedValues[k]}else{if(this.config.showAbsent){h[k]=(l.length?l[0]:c[0])}else{h[k]=l[0]}}this.UpdateRow(f,h[k],o,l)}this.selectedValues=h;this.ChangeInfo()}};b.JCCatalogElement.prototype.RowLeft=function(){var e="",c=-1,d,f=BX.proxy_context;if(!!f&&f.hasAttribute("data-treevalue")){e=f.getAttribute("data-treevalue");for(d=0;d<this.treeProps.length;d++){if(this.treeProps[d].ID===e){c=d;break}}if(-1<c&&this.treeRowShowSize<this.showCount[c]){if(0>this.showStart[c]){this.showStart[c]++;BX.adjust(this.obTreeRows[c].LIST,{style:{marginLeft:this.showStart[c]*20+"%"}})}}}};b.JCCatalogElement.prototype.RowRight=function(){var e="",c=-1,d,f=BX.proxy_context;if(!!f&&f.hasAttribute("data-treevalue")){e=f.getAttribute("data-treevalue");for(d=0;d<this.treeProps.length;d++){if(this.treeProps[d].ID===e){c=d;break}}if(-1<c&&this.treeRowShowSize<this.showCount[c]){if((this.treeRowShowSize-this.showStart[c])<this.showCount[c]){this.showStart[c]--;BX.adjust(this.obTreeRows[c].LIST,{style:{marginLeft:this.showStart[c]*20+"%"}})}}}};b.JCCatalogElement.prototype.UpdateRow=function(k,j,c,q){var s=0,t=0,p="",e=0,v="",g={},d={},r=null,m=false,h=false,o=false,n=0,l=this.treeEnableArrow,u=this.treeEnableArrow,f=0;if(-1<k&&k<this.obTreeRows.length){propMode=this.treeProps[k].DISPLAY_TYPE;r=BX.findChildren(this.obTreeRows[k].LIST,{tagName:this.skuVisualParams[propMode].TAG},false);if(!!r&&0<r.length){selectMode=("SELECT"===this.treeProps[k].DISPLAY_TYPE);e=c.length;g={style:{},props:{disabled:"",selected:"",},};d={style:{},};for(s=0;s<r.length;s++){p=r[s].getAttribute("data-onevalue");o=(p===j&&p!=0);if(BX.util.in_array(p,q)){g.props.className=(o?this.skuVisualParams[propMode].ACTIVE_CLASS:"")}else{g.props.className=(o?this.skuVisualParams[propMode].ACTIVE_CLASS+" "+this.skuVisualParams[propMode].HIDE_CLASS:this.skuVisualParams[propMode].HIDE_CLASS)}if(selectMode){g.props.disabled="disabled";g.props.selected=(o?"selected":"")}else{g.style.display="none"}if(BX.util.in_array(p,c)){if(selectMode){g.props.disabled=""}else{g.style.display=""}if(o){n=t}t++}BX.adjust(r[s],g)}if(!t){d.style.display="none"}else{d.style.display=""}BX.adjust(this.obTreeRows[k].CONT,d);if(selectMode){if($(this.obTreeRows[k].LIST).parent().hasClass("ik_select")){$(this.obTreeRows[k].LIST).ikSelect("reset")}}this.showCount[k]=e;this.showStart[k]=f}}};b.JCCatalogElement.prototype.GetRowValues=function(d,f){var c=[],g=0,e=0,h=false,k=true;if(0===d.length){for(g=0;g<this.offers.length;g++){if(!BX.util.in_array(this.offers[g].TREE[f],c)){c[c.length]=this.offers[g].TREE[f]}}h=true}else{for(g=0;g<this.offers.length;g++){k=true;for(e in d){if(d[e]!==this.offers[g].TREE[e]){k=false;break}}if(k){if(!BX.util.in_array(this.offers[g].TREE[f],c)){c[c.length]=this.offers[g].TREE[f]}h=true}}}return(h?c:false)};b.JCCatalogElement.prototype.GetCanBuy=function(c){var e=0,d=0,g=true,f=false;for(e=0;e<this.offers.length;e++){g=true;for(d in c){if(c[d]!==this.offers[e].TREE[d]){g=false;break}}if(g){if(this.offers[e].CAN_BUY){f=true;break}}}return f};b.JCCatalogElement.prototype.SetCurrent=function(){var h=0,g=0,k="",f=false,c=[],e={},d=[],l=this.offers[this.offerNum].TREE;for(h=0;h<this.treeProps.length;h++){k="PROP_"+this.treeProps[h].ID;f=this.GetRowValues(e,k);if(!f){break}if(BX.util.in_array(l[k],f)){e[k]=l[k]}else{e[k]=f[0];this.offerNum=0}if(this.config.showAbsent){c=[];d=[];d=BX.clone(e,true);for(g=0;g<f.length;g++){d[k]=f[g];if(this.GetCanBuy(d)){c[c.length]=f[g]}}}else{c=f}this.UpdateRow(h,e[k],f,c)}this.selectedValues=e;this.ChangeInfo()};b.JCCatalogElement.prototype.ChangeInfo=function(){var o=-1,g=0,d=0,m=null,f=true;for(g=0;g<this.offers.length;g++){f=true;for(d in this.selectedValues){if(this.selectedValues[d]!==this.offers[g].TREE[d]){f=false;break}}if(f){o=g;break}}if(-1<o){for(g=0;g<this.offers.length;g++){if(this.config.showOfferGroup&&this.offers[g].OFFER_GROUP){if(g!==o){if(!!BX(this.visual.OFFER_GROUP+this.offers[g].ID)){BX.adjust(BX(this.visual.OFFER_GROUP+this.offers[g].ID),{style:{display:"none"}})}}}}if(this.config.showOfferGroup&&this.offers[o].OFFER_GROUP){if(!!BX(this.visual.OFFER_GROUP+this.offers[o].ID)){BX.adjust(BX(this.visual.OFFER_GROUP+this.offers[o].ID),{style:{display:""}})}}if(0<this.offers[o].SLIDER_COUNT){this.SetMainPict(this.offers[o].ID,this.offers[o].SLIDER[0].ID)}else{this.SetMainPictFromItem(o)}this.SetAdditionalGallery(o);this.SetSliderPict(this.offers[o],this.offers[o].SLIDER,this.config);this.SetSliderPictMobile(this.offers[o],this.offers[o].SLIDER,this.config);if(this.config.showSkuProps&&!!this.obSkuProps){var l="",k=this.offers[o].TYPE_PROP;if(!this.offers[o].DISPLAY_PROPERTIES||this.offers[o].DISPLAY_PROPERTIES.length===0){if(k=="TABLE"){BX.adjust(this.obSkuProps,{style:{display:"none"},html:""})}else{$(this.obSkuProps).find(".sku_block_prop").remove()}}else{if(k!="TABLE"){$(this.obSkuProps).find(".sku_block_prop").remove()}for(var g in this.offers[o].DISPLAY_PROPERTIES){var n=((this.offers[o].DISPLAY_PROPERTIES[g].HINT&&this.offers[o].DISPLAY_PROPERTIES[g].SHOW_HINTS=="Y")?" whint1":""),q=((this.offers[o].DISPLAY_PROPERTIES[g].HINT&&this.offers[o].DISPLAY_PROPERTIES[g].SHOW_HINTS=="Y")?'<div class="hint"><span class="icon"><i>?</i></span><div class="tooltip">'+this.offers[o].DISPLAY_PROPERTIES[g].HINT+"</div></div>":"");if(k=="TABLE"){l+='<tr><td class="char_name"><span class="'+n+'">'+q+"<span>"+this.offers[o].DISPLAY_PROPERTIES[g].NAME+'</span></span></td><td class="char_value"><span>'+this.offers[o].DISPLAY_PROPERTIES[g].VALUE+"</span></td></tr>"}else{l='<div class="char sku_block_prop"><div class="char_name"><span class="'+n+'">'+q+"<span>"+this.offers[o].DISPLAY_PROPERTIES[g].NAME+'</span></span></div><div class="char_value"><span>'+this.offers[o].DISPLAY_PROPERTIES[g].VALUE+"</span></div></div>";$(this.obSkuProps).append(l)}}if(k=="TABLE"){BX.adjust(this.obSkuProps,{style:{display:""},html:l})}}}if(this.config.showSkuProps&&!!this.obSkuArticleProps){if("DISPLAY_PROPERTIES_CODE" in this.offers[o]){if("ARTICLE" in this.offers[o].DISPLAY_PROPERTIES_CODE){if(this.offers[o].DISPLAY_PROPERTIES_CODE.ARTICLE.VALUE){BX.adjust(this.obSkuArticleProps,{style:{display:""},html:this.offers[o].DISPLAY_PROPERTIES_CODE.ARTICLE.VALUE_FORMAT})}}else{if(this.offers[o].SHOW_ARTICLE_SKU=="Y"&&this.offers[o].ARTICLE_SKU){BX.adjust(this.obSkuArticleProps,{style:{display:""},html:this.offers[o].ARTICLE_SKU})}else{BX.adjust(this.obSkuArticleProps,{style:{display:"none"},html:""})}}}else{if(this.offers[o].SHOW_ARTICLE_SKU=="Y"&&this.offers[o].ARTICLE_SKU){BX.adjust(this.obSkuArticleProps,{style:{display:""},html:this.offers[o].ARTICLE_SKU})}else{BX.adjust(this.obSkuArticleProps,{style:{display:"none"},html:""})}}}setLocationSKU(this.offers[o].ID);$(this.obBasketActions).closest(".counter_wrapp").addClass("hidden_block");this.offerNum=o;this.QuantitySet(this.offerNum);this.setStoreBlock(this.offers[o].ID);this.setQuantityStore(this.offers[o].MAX_QUANTITY,this.offers[o].AVAILIABLE.TEXT);this.incViewedCounter();BX.onCustomEvent("onCatalogStoreProductChange",[this.offers[this.offerNum].ID]);$(this.obPict).parent().data("id",this.offers[o].ID);var h=this.offers[o].PRICE;if(this.offers[o].ITEM_PRICE_MODE=="Q"&&this.offers[o].ITEM_PRICES&&this.offers[o].USE_PRICE_COUNT){if(this.offers[o].USE_PRICE_COUNT&&this.offers[o].PRICE_MATRIX){this.checkPriceRange(this.offers[o].CONFIG.MIN_QUANTITY_BUY)}h=this.currentPrices[this.currentPriceSelected];h.DISCOUNT_VALUE=h.PRICE;h.PRINT_DISCOUNT_VALUE=getCurrentPrice(h.PRICE,h.CURRENCY,h.PRINT_PRICE);h.VALUE=h.BASE_PRICE;h.PRINT_VALUE=getCurrentPrice(h.BASE_PRICE,h.CURRENCY,h.PRINT_BASE_PRICE)}setViewedProduct(this.offers[o].ID,{PRODUCT_ID:this.offers[o].PRODUCT_ID,IBLOCK_ID:this.offers[o].IBLOCK_ID,NAME:this.offers[o].NAME,DETAIL_PAGE_URL:this.offers[o].URL,PICTURE_ID:this.offers[o].PREVIEW_PICTURE?this.offers[o].PREVIEW_PICTURE.ID:(this.offers[o].PARENT_PICTURE?this.offers[o].PARENT_PICTURE.ID:(this.offers[o].SLIDER_COUNT?this.offers[o].SLIDER[0].ID:false)),CATALOG_MEASURE_NAME:this.offers[o].MEASURE,MIN_PRICE:h,CAN_BUY:this.offers[o].CAN_BUY?"Y":"N",IS_OFFER:"Y",WITH_OFFERS:"N"});var e=this.offers[o],c=$(this.obProduct),p=this;if(typeof arBasketAspro!=="undefined"){this.setActualDataBlock(c,e)}else{if(typeof b.frameCacheVars!=="undefined"){BX.addCustomEvent("onFrameDataReceived",function(){p.setActualDataBlock(c,e)})}}if($(this.obProduct).find(".quantity_block .values").length){$(this.obProduct).find(".quantity_block .values .item span.value").text(this.offers[o].MAX_QUANTITY).css({opacity:"1"})}if(this.offers[o].SHOW_DISCOUNT_TIME_EACH_SKU=="Y"){initCountdownTime($(this.obProduct),this.offers[o].DISCOUNT_ACTIVE)}if(arNextOptions.THEME["CHANGE_TITLE_ITEM"]=="Y"){$("h1").html(this.offers[o].NAME);document.title=$("h1").html()+""+this.offers[o].POSTFIX;ItemObj.TITLE=this.offers[o].NAME;ItemObj.WINDOW_TITLE=this.offers[o].NAME+""+this.offers[o].POSTFIX}$('.catalog_detail input[data-sid="PRODUCT_NAME"]').attr("value",$("h1").text())}};b.JCCatalogElement.prototype.checkPriceRange=function(g){if(typeof g==="undefined"||this.currentPriceMode!="Q"){return}var d,f=false;for(var e in this.currentQuantityRanges){if(this.currentQuantityRanges.hasOwnProperty(e)){d=this.currentQuantityRanges[e];if(parseInt(g)>=parseInt(d.SORT_FROM)&&(d.SORT_TO=="INF"||parseInt(g)<=parseInt(d.SORT_TO))){f=true;this.currentQuantityRangeSelected=d.HASH;break}}}if(!f&&(d=this.getMinPriceRange())){this.currentQuantityRangeSelected=d.HASH}for(var c in this.currentPrices){if(this.currentPrices.hasOwnProperty(c)){if(this.currentPrices[c].QUANTITY_HASH==this.currentQuantityRangeSelected){this.currentPriceSelected=c;break}}}};b.JCCatalogElement.prototype.getMinPriceRange=function(){var c;for(var d in this.currentQuantityRanges){if(this.currentQuantityRanges.hasOwnProperty(d)){if(!c||parseInt(this.currentQuantityRanges[d].SORT_FROM)<parseInt(c.SORT_FROM)){c=this.currentQuantityRanges[d]}}}return c};b.JCCatalogElement.prototype.setActualDataBlock=function(c,d){this.setLikeBlock(c,".like_icons .wish_item",d,"DELAY");this.setLikeBlock(c,".like_icons .compare_item",d,"COMPARE");this.setBuyBlock(c,d)};b.JCCatalogElement.prototype.SetSliderPict=function(j,g,d){var c=$(".wrapp_thumbs"),f="";countPhoto=j.SLIDER_COUNT;c.find(".thumbs").css({"max-width":Math.ceil(((countPhoto<=4?countPhoto:4)*64)-10)});f='<ul class="slides_block">';for(var e in g){if(typeof(g[e])=="object"){f+='<li data-big="'+g[e].BIG.src+'"><span class="cnt"><img border="0" src="'+g[e].THUMB.src+'" alt="'+g[e].ALT+'" title="'+g[e].TITLE+'" /></span></li>'}}f+="</ul>";c.find(".thumbs").html(f);if(countPhoto>1){c.show();if(c.find(".thumbs_navigation").length){c.find(".thumbs_navigation").remove()}c.find(".thumbs").append('<span class="thumbs_navigation custom_flex"></span>');c.find(".thumbs").removeData("flexslider");c.find(".thumbs").flexslider({animation:"slide",selector:".slides_block > li",slideshow:false,animationSpeed:600,directionNav:true,controlNav:false,pauseOnHover:true,itemWidth:54,itemMargin:10,animationLoop:true,controlsContainer:".thumbs_navigation",});c.find(".thumbs .slides_block li").first().addClass("current");var h=$(this.obPict);c.find(".thumbs").delegate("li:not(.current):not(.flex-nav-next):not(.flex-nav-prev)","click",function(n){var l="",m="",k="",i="";index=$(this).index();if(typeof g[index]!=="undefined"){if("SMALL" in g[index]){l=g[index].SMALL.src}else{if("SRC" in g[index]){l=g[index].SRC}}if("BIG" in g[index]){m=g[index].BIG.src}if("WIDTH" in g[index]){k=g[index].WIDTH}if("HEIGHT" in g[index]){i=g[index].HEIGHT}}$(this).addClass("current").siblings().removeClass("current").parents(".item_slider").find(".slides li").fadeOut(333);$(this).parents(".item_slider").find(".slides li").eq(index).addClass("current").stop().fadeIn(333);if(l){BX.adjust(h[0],{props:{src:l}})}h.attr("data-large","");if(m){if(d.mainPictureMode==="POPUP"){h.parent().attr("href",m)}if(d.mainPictureMode==="MAGNIFIER"){h.attr("data-large",m);h.attr("xoriginal",m)}h.parent().attr("title",g[index].TITLE);h.parent().attr("alt",g[index].ALT);h.attr("title",g[index].TITLE);h.attr("alt",g[index].ALT)}})}else{c.hide()}};b.JCCatalogElement.prototype.SetSliderPictMobile=function(g,f){var c=$(".item_slider.flex"),e="";countPhoto=g.SLIDER_COUNT;e='<ul class="slides">';if(!f.length){e+='<li data-value=""><span data-fancybox-group="item_slider" class="fancy"><img border="0" src="'+g.NO_PHOTO.SRC+'" alt="'+g.NAME+'" title="'+g.NAME+'" /></span></li>'}else{for(var d in f){if(typeof(f[d])=="object"){e+='<li data-value="'+g.ID+"_"+f[d].ID+'"><a href="'+f[d].BIG.src+'" data-fancybox-group="item_slider" class="fancy popup_link" title="'+f[d].TITLE+'"><img border="0" src="'+f[d].SMALL.src+'" alt="'+f[d].ALT+'" title="'+f[d].TITLE+'" /><div class="zoom"></div></a></li>'}}}e+="</ul>";c.html(e);c.removeData("flexslider");c.flexslider({animation:"slide",slideshow:false,slideshowSpeed:10000,animationSpeed:600,directionNav:false,pauseOnHover:true,animationLoop:false,})};b.JCCatalogElement.prototype.setLikeBlock=function(e,d,f,c){var g=e;if(c=="DELAY"){if(f.CAN_BUY){g.find(d).css("display","block")}else{g.find(d).hide()}}g.find(d).attr("data-item",f.ID);if(arBasketAspro[c]){g.find(d).removeClass("added");g.find(d).find(".value").css("display","block");g.find(d).find(".value.added").hide();if(arBasketAspro[c][f.ID]!==undefined){g.find(d).addClass("added");g.find(d).find(".value").hide();g.find(d).find(".value.added").css("display","block")}}};b.JCCatalogElement.prototype.setBuyBlock=function(c,h){var d=c.find(".offer_buy_block"),e=h.CONFIG.MIN_QUANTITY_BUY;if(d.find(".counter_wrapp .counter_block").length){d.find(".counter_wrapp .counter_block").attr("data-item",h.ID)}if(this.offers[this.offerNum].offer_set_quantity){e=this.offers[this.offerNum].offer_set_quantity}if(c.find(".cheaper_form").length){var i=c.find(".cheaper_form span");i.data("autoload-product_name",h.NAME);i.data("autoload-product_id",h.ID)}if((h.CONFIG.OPTIONS.USE_PRODUCT_QUANTITY_DETAIL&&h.CONFIG.ACTION=="ADD")&&h.CAN_BUY){var l=(h.CONFIG.MAX_QUANTITY_BUY>0?"data-max='"+h.CONFIG.MAX_QUANTITY_BUY+"'":""),j='<span class="minus">-</span><input type="text" class="text" name="'+h.PRODUCT_QUANTITY_VARIABLE+'" value="'+e+'" /><span class="plus" '+l+">+</span>";if(arBasketAspro.BASKET&&arBasketAspro.BASKET[h.ID]!==undefined){if(d.find(".counter_wrapp .counter_block").length){d.find(".counter_wrapp .counter_block").hide()}else{d.find(".counter_wrapp").prepend('<div class="counter_block big_basket" data-item="'+h.ID+'"></div>');d.find(".counter_wrapp .counter_block").html(j).hide()}}else{if(d.find(".counter_wrapp .counter_block").length){d.find(".counter_wrapp .counter_block").html(j).show()}else{d.find(".counter_wrapp").prepend('<div class="counter_block big_basket" data-item="'+h.ID+'"></div>');d.find(".counter_wrapp .counter_block").html(j)}}}else{if(d.find(".counter_wrapp .counter_block").length){d.find(".counter_wrapp .counter_block").hide()}}var k=((h.CONFIG.ACTION=="ORDER")||!h.CAN_BUY||!h.CONFIG.OPTIONS.USE_PRODUCT_QUANTITY_DETAIL||(h.CONFIG.ACTION=="SUBSCRIBE"&&h.CATALOG_SUBSCRIBE=="Y")?"wide":""),f=$('<div class="button_block"></div>');if(d.find(".counter_wrapp").find(".button_block").length){if(arBasketAspro.BASKET&&arBasketAspro.BASKET[h.ID]!==undefined){d.find(".counter_wrapp").find(".button_block").addClass("wide").html(h.HTML);markProductAddBasket(h.ID)}else{if(k){d.find(".counter_wrapp").find(".button_block").addClass("wide").html(h.HTML);if(typeof arBasketAspro!=="undefined"){if(arBasketAspro.SUBSCRIBE&&arBasketAspro.SUBSCRIBE[h.ID]!==undefined){markProductSubscribe(h.ID)}}}else{d.find(".counter_wrapp").find(".button_block").removeClass("wide").html(h.HTML)}}}else{d.find(".counter_wrapp").append('<div class="button_block '+k+'">'+h.HTML+"</div>");if(arBasketAspro.BASKET&&arBasketAspro.BASKET[h.ID]!==undefined){markProductAddBasket(h.ID)}if(arBasketAspro.SUBSCRIBE&&arBasketAspro.SUBSCRIBE[h.ID]!==undefined){markProductSubscribe(h.ID)}}if(h.CONFIG.ACTION!=="NOTHING"){if(h.CONFIG.ACTION=="ADD"&&h.CAN_BUY&&h.SHOW_ONE_CLICK_BUY!="N"){var g='<span class="transparent btn-lg type_block btn btn-default white one_click transition_bg" data-offers="Y" data-item="'+h.ID+'" data-iblockID="'+h.IBLOCK_ID+'" data-quantity="'+h.CONFIG.MIN_QUANTITY_BUY+'" data-props="'+h.OFFER_PROPS+'" onclick="oneClickBuy('+h.ID+", "+h.IBLOCK_ID+', this)"><span>'+h.ONE_CLICK_BUY+"</span></span>";if(d.find(".wrapp_one_click").length){d.find(".wrapp_one_click").html(g)}else{d.append('<div class="wrapp_one_click">'+g+"</div>")}}else{if(d.find(".wrapp_one_click").length){d.find(".wrapp_one_click").remove()}}}else{if(d.find(".wrapp_one_click").length){d.find(".wrapp_one_click").remove()}}d.fadeIn();d.find(".counter_wrapp .counter_block input").data("product","ob"+this.obProduct.id);this.setPriceAction("","Y")};b.JCCatalogElement.prototype.setStoreBlock=function(c){$(".stores_tab .stores_wrapp > div").hide();$(".stores_tab .sku_stores_"+c).show()};b.JCCatalogElement.prototype.setQuantityStore=function(c,d){if(parseFloat(c)>0){$(this.storeQuanity).find(".icon").removeClass("order").addClass("stock")}else{$(this.storeQuanity).find(".icon").removeClass("stock").addClass("order")}$(this.storeQuanity).find(".icon + span").html(d);if(!$(".stores_tab").length){$(".item-stock .store_view").removeClass("store_view")}};b.JCCatalogElement.prototype.CompareCountResult=function(c){if(c.COMPARE_COUNT){for(var d in c.ITEMS){if(c.ITEMS[d]==this.offers[this.offerNum].ID){this.offers[this.offerNum].COMPARE_ACTIVE=true;break}else{this.offers[this.offerNum].COMPARE_ACTIVE=false}}if(this.offers[this.offerNum].COMPARE_ACTIVE){$(this.obCompare).addClass("added");$(this.obCompare).find(".value:not(.added)").hide();$(this.obCompare).find(".value.added").css("display","block")}else{$(this.obCompare).removeClass("added");$(this.obCompare).find(".value.added").hide();$(this.obCompare).find(".value:not(.added)").css("display","block")}}};b.JCCatalogElement.prototype.ItemInfoResult=function(c){if(c.HTML){$(this.obBasketActions).html(c.HTML);$(this.obBasketActions).show();this.obAddToBasketBtn=BX(this.visual.BUY_ID);this.obBasketBtn=BX(this.visual.BASKET_LINK);this.obSubscribeBtn=BX(this.visual.SUBSCRIBE_ID);this.obSubscribedBtn=BX(this.visual.SUBSCRIBED_ID);BX.bind(this.obAddToBasketBtn,"click",BX.delegate(this.Add2Basket,this));$(this.obBasketActions).removeClass("wide");this.ajax_type_item=c.BUYMISSINGGOODS;if(c.BUYMISSINGGOODS!="ADD"&&!this.canBuy){$(this.obBasketActions).addClass("wide")}else{$(this.obQuantity).css("display","")}if(c.ONE_CLICK_HTML){$(".wrapp_one_click").html(c.ONE_CLICK_HTML)}}basketParams={ajax_action:"Y"};BX.ajax.loadJSON(arNextOptions.SITE_DIR+"ajax/get_basket_count.php",basketParams,BX.delegate(this.BasketCountResult,this))};b.JCCatalogElement.prototype.BasketCountResult=function(c){for(var d in c.ITEMS){if(c.ITEMS[d].PRODUCT_ID==this.offers[this.offerNum].ID){this.offers[this.offerNum].BASKET_ACTIVE=true;break}else{this.offers[this.offerNum].BASKET_ACTIVE=false}}for(var d in c.SUBSCRIBE_ITEMS){if(c.SUBSCRIBE_ITEMS[d].PRODUCT_ID==this.offers[this.offerNum].ID){this.offers[this.offerNum].SUBSCRIBE_ACTIVE=true;break}else{this.offers[this.offerNum].SUBSCRIBE_ACTIVE=false}}this.BasketStateRefresh()};b.JCCatalogElement.prototype.BasketStateRefresh=function(c){if(this.offers[this.offerNum].SUBSCRIBE_ACTIVE){$(this.obBasketActions).addClass("wide");$(this.obSubscribeBtn).hide();$(this.obSubscribedBtn).show()}else{$(this.obBasketActions).addClass("wide");$(this.obSubscribedBtn).hide();$(this.obSubscribeBtn).show()}if(this.offers[this.offerNum].BASKET_ACTIVE){$(this.obAddToBasketBtn).hide();$(this.obQuantity).closest(".counter_wrapp").find(".counter_block").hide();$(this.obBasketBtn).show();$(this.obBasketActions).addClass("wide")}else{$(this.obBasketActions).removeClass("wide");$(this.obBasketBtn).hide();if(this.ajax_type_item=="ADD"||this.canBuy){$(this.obQuantity).closest(".counter_wrapp").find(".counter_block").show()}$(this.obAddToBasketBtn).show()}if(!this.canBuy){$(this.obBasketActions).addClass("wide")}if(this.canBuy){$(".one_click").removeClass("hidden_block").css("opacity",1)}BX.style(this.obBasketActions,"opacity","1");$(this.obBasketActions).closest(".counter_wrapp").removeClass("hidden_block").css("opacity",1);if(c!=="undefined"&&c=="Y"){if($("#basket_line .basket_fly").length&&$(b).outerWidth()>768){basketFly("open")}else{if($("#basket_line .cart").length){if($("#basket_line .cart").is(".empty_cart")){$("#basket_line .cart").removeClass("empty_cart").find(".cart_wrapp a.basket_link").removeAttr("href").addClass("cart-call");touchBasket(".cart:not(.empty_cart) .basket_block .link")}reloadTopBasket("add",$("#basket_line"),200,2000,"Y")}}animateBasketLine(200)}};b.JCCatalogElement.prototype.setPriceAction=function(h,g){var d=this.offers[this.offerNum].MEASURE&&this.offers[this.offerNum].SHOW_MEASURE=="Y"?this.offers[this.offerNum].MEASURE:"";var e=$(this.obProduct),f="",c=(typeof g!=="undefined"&&g=="Y");this.offers[this.offerNum].offer_set_quantity=this.offers[this.offerNum].CONFIG.MIN_QUANTITY_BUY;if($(e).find("input[name=quantity]").length){this.offers[this.offerNum].offer_set_quantity=$(e).find("input[name=quantity]").val()}if($(e).find(".price.discount").length){$(e).find(".price.discount").html("")}if($(e).find(".sale_block:not(.matrix)").length){$(e).find(".sale_block:not(.matrix)").html("")}if(this.offers[this.offerNum].USE_PRICE_COUNT&&this.offers[this.offerNum].PRICE_MATRIX){this.checkPriceRange(this.offers[this.offerNum].offer_set_quantity);this.setPriceMatrix(this.offers[this.offerNum].PRICE_MATRIX)}else{if("PRICES" in this.offers[this.offerNum]){this.setPrice(this.offers[this.offerNum].PRICES,d)}}if(arNextOptions.THEME["SHOW_TOTAL_SUMM"]=="Y"){if(this.offers[this.offerNum].check_quantity){f="Y"}else{var f=((typeof h!=="undefined"&&h=="Y")?h:"");if(f){this.offers[this.offerNum].check_quantity=true}}if(typeof this.currentPrices[this.currentPriceSelected]!=="undefined"){if(arNextOptions.THEME["SHOW_TOTAL_SUMM_TYPE"]=="ALWAYS"){f=c=""}setPriceItem(e,this.offers[this.offerNum].offer_set_quantity,this.currentPrices[this.currentPriceSelected].PRICE,f,c)}}};b.JCCatalogElement.prototype.setPriceMatrix=function(g){var c="";if(!!this.obPrice.price){var d=this.offers[this.offerNum].MEASURE&&this.offers[this.offerNum].SHOW_MEASURE=="Y"?this.offers[this.offerNum].MEASURE:"",e="";e=getCurrentPrice(this.currentPrices[this.currentPriceSelected].PRICE,this.currentPrices[this.currentPriceSelected].CURRENCY,this.currentPrices[this.currentPriceSelected].PRINT_PRICE);if(d){e+='<span class="price_measure">/'+d+"</span>"}$(this.obProduct).find(".not_matrix").hide();$(this.obProduct).find(".with_matrix .price_value_block").html(e);if(this.config.showOldPrice){if(parseFloat(this.currentPrices[this.currentPriceSelected].BASE_PRICE)>parseFloat(this.currentPrices[this.currentPriceSelected].PRICE)){$(this.obProduct).find(".with_matrix .discount").html(getCurrentPrice(this.currentPrices[this.currentPriceSelected].BASE_PRICE,this.currentPrices[this.currentPriceSelected].CURRENCY,this.currentPrices[this.currentPriceSelected].PRINT_BASE_PRICE));$(this.obProduct).find(".with_matrix .discount").css("display","inline-block")}else{$(this.obProduct).find(".with_matrix .discount").html("");$(this.obProduct).find(".with_matrix .discount").css("display","none")}}else{$(this.obProduct).find(".with_matrix .discount").html("");$(this.obProduct).find(".with_matrix .discount").css("display","none")}$(this.obProduct).find(".with_matrix .sale_block .text .values_wrapper").html(getCurrentPrice(this.currentPrices[this.currentPriceSelected].DISCOUNT,this.currentPrices[this.currentPriceSelected].CURRENCY,this.currentPrices[this.currentPriceSelected].PRINT_DISCOUNT));if(this.config.showPercent&&parseFloat(this.currentPrices[this.currentPriceSelected].DISCOUNT)>0){$(this.obProduct).find(".with_matrix .sale_block").show()}else{$(this.obProduct).find(".with_matrix .sale_block").hide()}$(this.obProduct).find(".with_matrix").show();BX.adjust(this.obPrice.price,{html:g});var f={product:$(this.obProduct),measure:d,config:this.config,offer:this.offers[this.offerNum],obPrice:this.currentPrices[this.currentPriceSelected]};BX.onCustomEvent("onAsproSkuSetPriceMatrix",[f])}};b.JCCatalogElement.prototype.setPrice=function(k,c){var f="";if(!!this.obPrice.price){var c=this.offers[this.offerNum].MEASURE&&this.offers[this.offerNum].SHOW_MEASURE=="Y"?this.offers[this.offerNum].MEASURE:"",l=$(this.obProduct),k=this.offers[this.offerNum].PRICES;if(typeof(k)=="object"){var g="",i=Object.keys(k).length,d=[];if(arNextOptions.THEME["DISCOUNT_PRICE"]){d=arNextOptions.THEME["DISCOUNT_PRICE"].split(",")}g='<div class="offers_price_wrapper">';$(this.obProduct).find(".with_matrix").hide();$(this.obProduct).find(".not_matrix").show();for(var e in k){if(k[e]&&k[e].VALUE>0){if("GROUP_NAME" in k[e]){if(i>1){g+='<div class="offers_price_title">';g+=k[e].GROUP_NAME;g+="</div>"}}g+='<div class="offers_price'+(d?(BX.util.in_array(k[e].PRICE_ID,d)?" strike_block":""):"")+'">';g+='<span class="values_wrapper">'+getCurrentPrice(k[e].DISCOUNT_VALUE,k[e].CURRENCY,k[e].PRINT_DISCOUNT_VALUE)+"</span>";if(c){g+='<span class="price_measure">/'+c+"</span>"}g+="</div>";if(k[e].DISCOUNT_VALUE!==k[e].VALUE){if(this.config.showOldPrice){g+='<div class="offers_price_old">';g+='<span class="values_wrapper">'+getCurrentPrice(k[e].VALUE,k[e].CURRENCY,k[e].PRINT_VALUE)+"</span>";g+="</div>"}if(this.config.showPercent){g+='<div class="sale_block">';g+='<span class="title">'+BX.message("ITEM_ECONOMY")+"</span>";g+='<div class="text">';g+='<span class="values_wrapper">'+getCurrentPrice(k[e].DISCOUNT_DIFF,k[e].CURRENCY,k[e].PRINT_DISCOUNT_DIFF)+"</span>";g+="</div>";g+='<div class="clearfix"></div></div>'}}else{if(this.config.showOldPrice){if(!!this.obPrice.full){BX.adjust(this.obPrice.full,{style:{display:"none"},html:""})}if(!!this.obPrice.discount){BX.adjust(this.obPrice.discount,{style:{display:"none"},html:""})}}}$(".prices_block .cost.prices").show()}else{$(".prices_block .cost.prices").hide()}}if(this.config.showPercent){if(!!this.obPrice.percent){BX.adjust(this.obPrice.percent,{style:{display:"none"},html:""})}$(this.obPrice.full).closest(".cost").find(".sale_block:not(.matrix)").hide();$(this.obPrice.full).closest(".cost").find(".sale_block:not(.matrix) .value").html("");$(this.obPrice.full).closest(".cost").find(".sale_block:not(.matrix) .text span").html("")}g+="</div>";BX.adjust(this.obPrice.price,{html:g});$(this.obPrice.full).hide().html("");if(this.showPercent){$(this.obPrice.full).closest(".cost").find(".sale_block").hide()}var h={product:l,measure:c,config:this.config,offer:this.offers[this.offerNum],obPrices:k};BX.onCustomEvent("onAsproSkuSetPrice",[h])}}};b.JCCatalogElement.prototype.Compare=function(){var c,d;if($(this.obCompare).find(".added").is(":visible")){d=this.compareData.compareUrlDel;this.compareData.Added=false}else{d=this.compareData.compareUrl;this.compareData.Added=true}if(!!d){switch(this.productType){case 1:case 2:d=d.replace("#ID#",this.product.id.toString());break;case 3:d=d.replace("#ID#",this.offers[this.offerNum].ID);break}c={ajax_action:"Y"};BX.ajax.loadJSON(d,c,BX.proxy(this.CompareResult,this))}};b.JCCatalogElement.prototype.CompareResult=function(c){var e,f,d;if(typeof c!=="object"){return false}if(c.STATUS==="OK"){BX.onCustomEvent("OnCompareChange");if(!this.compareData.Added){$(this.obCompare).removeClass("added");$(this.obCompare).find(".added").hide();$(this.obCompare).find(".value:not(.added)").css("display","block")}else{$(this.obCompare).addClass("added");$(this.obCompare).find(".value:not(.added)").hide();$(this.obCompare).find(".added").css("display","block")}jsAjaxUtil.InsertDataToNode(arNextOptions.SITE_DIR+"ajax/show_compare_preview_top.php","compare_line",false)}else{console.log(BX.message("ADD_ERROR_COMPARE"))}return false};b.JCCatalogElement.prototype.CompareRedirect=function(){if(!!this.compareData.comparePath){location.href=this.compareData.comparePath}else{this.obPopupWin.close()}};b.JCCatalogElement.prototype.InitBasketUrl=function(){var c="";this.basketUrl=(this.basketMode==="ADD"?this.basketData.add_url:this.basketData.buy_url);switch(this.productType){case 1:case 2:this.basketUrl=this.basketUrl.replace("#ID#",this.product.id.toString());c=this.product.id.toString();break;case 3:this.basketUrl=this.basketUrl.replace("#ID#",this.offers[this.offerNum].ID);c=this.offers[this.offerNum].URL;break}this.basketParams={ajax_basket:"Y"};if(this.config.showQuantity){this.basketParams[this.basketData.quantity]=this.obQuantity.value}if(!!this.basketData.sku_props){this.basketParams[this.basketData.sku_props_var]=this.basketData.sku_props}if(!!c){this.basketParams.REQUEST_URI=c}};b.JCCatalogElement.prototype.FillBasketProps=function(){if(!this.visual.BASKET_PROP_DIV){return}var c=0,f=null,e=false,d=null;if(this.basketData.useProps&&!this.basketData.emptyProps){if(!!this.obPopupWin&&!!this.obPopupWin.contentContainer){d=this.obPopupWin.contentContainer}}else{d=BX(this.visual.BASKET_PROP_DIV)}if(!!d){f=d.getElementsByTagName("select");if(!!f&&!!f.length){for(c=0;c<f.length;c++){if(!f[c].disabled){switch(f[c].type.toLowerCase()){case"select-one":this.basketParams[f[c].name]=f[c].value;e=true;break;default:break}}}}f=d.getElementsByTagName("input");if(!!f&&!!f.length){for(c=0;c<f.length;c++){if(!f[c].disabled){switch(f[c].type.toLowerCase()){case"hidden":this.basketParams[f[c].name]=f[c].value;e=true;break;case"radio":if(f[c].checked){this.basketParams[f[c].name]=f[c].value;e=true}break;default:break}}}}}if(!e){this.basketParams[this.basketData.props]=[];this.basketParams[this.basketData.props][0]=0}};b.JCCatalogElement.prototype.SendToBasket=function(){if(!this.canBuy){return}this.InitBasketUrl();this.FillBasketProps();BX.ajax.loadJSON(this.basketUrl,this.basketParams,BX.proxy(this.BasketResult,this))};b.JCCatalogElement.prototype.Add2Basket=function(){this.basketMode="ADD";this.Basket()};b.JCCatalogElement.prototype.BuyBasket=function(){this.basketMode="BUY";this.Basket()};b.JCCatalogElement.prototype.Basket=function(){var c="";if(!this.canBuy){return}this.SendToBasket()};b.JCCatalogElement.prototype.BasketResult=function(e){var d,g,c,f;if(!!this.obPopupWin){this.obPopupWin.close()}if(typeof e!=="object"){return false}if(e.STATUS==="OK"&&this.basketMode==="BUY"){this.BasketRedirect()}else{c={content:BX.create("div",{style:{marginRight:"30px",whiteSpace:"nowrap"},text:(e.STATUS==="OK"?BX.message("TITLE_SUCCESSFUL"):BX.message("TITLE_ERROR"))})};if(e.STATUS==="OK"){BX.onCustomEvent("OnBasketChange");this.offers[this.offerNum].BASKET_ACTIVE=true;this.BasketStateRefresh("Y")}else{console.log(BX.message("ADD_ERROR_BASKET"))}}return false};b.JCCatalogElement.prototype.BasketRedirect=function(){location.href=(!!this.basketData.basketUrl?this.basketData.basketUrl:BX.message("BASKET_URL"))};b.JCCatalogElement.prototype.InitPopupWindow=function(){if(!!this.obPopupWin){return}this.obPopupWin=BX.PopupWindowManager.create("CatalogElementBasket_"+this.visual.ID,null,{autoHide:false,offsetLeft:0,offsetTop:0,overlay:true,closeByEsc:true,titleBar:true,closeIcon:{top:"10px",right:"10px"}})};b.JCCatalogElement.prototype.onPopupWindowShow=function(c){BX.bind(document,"click",BX.proxy(this.popupWindowClick,this))};b.JCCatalogElement.prototype.onPopupWindowClose=function(c,d){BX.unbind(document,"click",BX.proxy(this.popupWindowClick,this))};b.JCCatalogElement.prototype.popupWindowClick=function(){if(!!this.obPopupPict&&typeof(this.obPopupPict)==="object"){if(this.obPopupPict.isShown()){this.obPopupPict.close()}}};b.JCCatalogElement.prototype.incViewedCounter=function(){if(this.currentIsSet&&!this.updateViewedCount){switch(this.productType){case 1:case 2:this.viewedCounter.params.PRODUCT_ID=this.product.id;this.viewedCounter.params.PARENT_ID=this.product.id;break;case 3:this.viewedCounter.params.PARENT_ID=this.product.id;this.viewedCounter.params.PRODUCT_ID=this.offers[this.offerNum].ID;break;default:return}this.viewedCounter.params.SITE_ID=BX.message("SITE_ID");this.updateViewedCount=true;BX.ajax.post(this.viewedCounter.path,this.viewedCounter.params,BX.delegate(function(){this.updateViewedCount=false},this))}};b.JCCatalogElement.prototype.allowViewedCount=function(c){c=!!c;this.currentIsSet=true;if(c){this.incViewedCounter()}}})(window);